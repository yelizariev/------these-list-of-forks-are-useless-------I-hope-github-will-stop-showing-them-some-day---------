<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Work+Sans:500,600" rel="stylesheet">
  
    <title>ORM API &#8212; Документация odoo 13.0</title>
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/patchqueue.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/doc.js"></script>
    <script type="text/javascript" src="../_static/jquery.noconflict.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/patchqueue.js"></script><link rel="canonical" href="" />
  
    <link rel="index" title="Алфавитный указатель" href="../genindex.html" />
    <link rel="search" title="Поиск" href="../search.html" />
    <link rel="next" title="Дата файлы" href="data.html" />
    <link rel="prev" title="Ссылка" href="../reference.html" /> 
  </head><body><header class="o_main_header o_has_sub_nav o_inverted ">
<!-- 
    <div class="o_main_header_main">
      <a class="pull-left o_logo" href="/"></a>
      <a href="#" class="o_mobile_menu_toggle visible-xs-block pull-right">
        <span class="sr-only">Toggle navigation</span>
        <span class="mdi-navigation-menu"></span>
      </a>
      <div class="o_header_buttons">
        <a href="http://www.odoo.com/trial" class="btn btn-primary">Start Now</a>
      </div>
      <ul class="o_primary_nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle">Apps</a>
          <div class="dropdown-menu o_secondary_nav">
            <div class="container">
              <div class="row">
                <div class="col-sm-3 o_website_apps">
                  <div class="o_nav_app_family">
                    <span></span> Websites
                    <div>Build great user experience</div>
                  </div>
                  <ul>
                    <li><a href="https://www.odoo.com/page/website-builder">Website Builder</a></li>
                    <li><a href="https://www.odoo.com/page/e-commerce">eCommerce</a></li>
                    <li><a href="https://www.odoo.com/page/blog-engine">Blogs</a></li>
                    <li><a href="https://www.odoo.com/page/community-builder">Forums</a></li>
                    <li><a href="https://www.odoo.com/page/slides">Slides</a></li>
                    <li><a href="https://adspike.odoo.com">SEA</a></li>
                  </ul>
                </div>
                <div class="col-sm-3 o_sale_apps">
                  <div class="o_nav_app_family">
                    <span></span> Sales
                    <div>Boost your success rate</div>
                  </div>
                  <ul>
                    <li><a href="https://www.odoo.com/page/sales">Sales</a></li>
                    <li><a href="https://www.odoo.com/page/crm">CRM</a></li>
                    <li><a href="https://www.odoo.com/page/billing">Invoicing</a></li>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Point of Sale</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/point-of-sale">Shops</a></li>
                        <li><a href="https://www.odoo.com/page/pos-restaurant">Restaurants</a></li>
                      </ul>
                    </li>
                    <li><a href="https://www.odoo.com/page/subscriptions">Subscriptions</a></li>
                    <li><a href="https://www.odoo.com/page/sign">Sign</a></li>
                  </ul>
                </div>
                <div class="col-sm-3 o_operation_apps">
                  <div class="o_nav_app_family">
                    <span></span> Operations
                    <div>It's all about efficiency</div>
                  </div>
                  <ul>
                    <li><a href="https://www.odoo.com/page/accounting">Accounting</a></li>
                    <li><a href="https://www.odoo.com/page/project-management">Project</a></li>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Human Resources</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/recruitment">Recruitment</a></li>
                        <li><a href="https://www.odoo.com/page/employees">Employees</a></li>
                        <li><a href="https://www.odoo.com/page/expenses">Expenses</a></li>
                        <li><a href="https://www.odoo.com/page/appraisal">Appraisal</a></li>
                        <li><a href="https://www.odoo.com/page/fleet">Fleet</a></li>
                        <li><a href="https://www.odoo.com/page/leaves">Leaves</a></li>
                      </ul>
                    </li>
                    <li><a href="https://www.odoo.com/page/warehouse">Inventory</a></li>
                    <li><a href="https://www.odoo.com/page/purchase">Purchase</a></li>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Manufacturing</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/manufacturing">MRP</a></li>
                        <li><a href="https://www.odoo.com/page/plm">PLM</a></li>
                        <li><a href="https://www.odoo.com/page/maintenance">Maintenance</a></li>
                        <li><a href="https://www.odoo.com/page/quality">Quality</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
                <div class="col-sm-3 o_productivity_apps">
                  <div class="o_nav_app_family">
                    <span></span> Productivity Tools
                    <div>Great Tools = Happy People</div>
                  </div>
                  <ul>
                    <li class="dropdown">
                      <a href="#0" class="dropdown-toggle">Communication</a>
                      <ul>
                        <li><a href="https://www.odoo.com/page/discuss">Discuss</a></li>
                        <li><a href="https://www.odoo.com/page/discuss-groups">Mailing Lists</a></li>
                        <li><a href="https://www.odoo.com/page/notes">Notes</a></li>
                        <li><a href="#">Help desk</a></li>
                        <li><a href="#">Appointment</a></li>
                      </ul>
                    </li>
                    <li><a href="https://www.odoo.com/page/timesheet">Timesheet</a></li>
                    <li><a href="https://www.odoo.com/page/email-marketing">Email Marketing</a></li>
                    <li><a href="https://www.odoo.com/page/events">Events</a></li>
                    <li><a href="https://www.odoo.com/page/survey">Survey</a></li>
                    <li><a href="https://www.odoo.com/page/live-chat">Live Chat</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <a href="http://www.odoo.com/apps/modules" class="o_store_link"><i class="fa fa-cube fa-fw"></i> Third party apps</a>
          </div>
        </li>
        <li><a href="https://www.odoo.com/page/tour">Tour</a></li>
        <li><a href="https://www.odoo.com/pricing">Pricing</a></li>
        <li><a href="https://www.odoo.com/page/docs">Docs</a></li>
      </ul>
    </div>
-->
    <nav class="navbar o_sub_nav">
      <div class="container">
        <div class="navbar-header visible-xs">
            <button type="button" class="navbar-toggle collapsed text-left btn-block" data-toggle="collapse" data-target="#o_sub-menu" aria-expanded="false">
              Navigate
              <span class="mdi-hardware-keyboard-arrow-down pull-right"></span>
            </button>
        </div>

        <div class="collapse navbar-collapse" id="o_sub-menu">
          <ol class="o_breadcrumb breadcrumb nav navbar-left">
              
              





    
        
            <li><a href="../index.html">Developer Doc</a></li>
        
    
    <li class="active"><a href="#">ORM API</a></li>

              
          </ol>

          <div class="call-to-action navbar-right hidden-xs">
            <a href="http://www.odoo.com/trial" class="btn btn-primary">Start Now</a>
          </div>

          <ul class="navbar-nav navbar-right nav o_sub_nav_actions">
            
              <li class="divider"></li>
            

            
            


            
          </ul>

          <ul class="nav navbar-nav navbar-right">
            

            
            
<!--
<li><a href="https://www.odoo.com/documentation/user/13.0/index.html">User</a></li>
<li><a href="https://www.odoo.com/documentation/13.0/index.html">Developer</a></li>
<li><a href="https://www.odoo.com/documentation/13.0/setup/install.html">Installation</a></li>
<li><a href="https://odoo.com/slides">eLearning</a></li>
<li><a href="https://www.odoo.com/page/odoo-white-paper">White Papers</a></li>
<li><a href="https://www.odoo.com/page/legal">Legal</a></li>
-->
            

            
          </ul>
        </div>
      </div>
    </nav>
  </header><div id="wrap" class="">
    
    
    
    <figure class="card top has_banner">
      <span class="card-img" style="background-image: url('../_static/banners/orm_api.jpg');"></span>
      <div class="container text-center">
        <h1> ORM API </h1>
      </div>
    </figure>
    
    
    
      <main class="container ">
        
        <div class="o_content row">
          
          <aside>
            <div class="navbar-aside text-center">
              <ul class="nav list-group text-left"><li class="list-group-item"><a href="#models" class="reference internal ripple">модели</a><ul ><li class="list-group-item"><a href="#abstractmodel" class="reference internal ripple">AbstractModel</a></li><li class="list-group-item"><a href="#model" class="reference internal ripple">модель</a></li><li class="list-group-item"><a href="#transientmodel" class="reference internal ripple">TransientModel</a></li></ul></li><li class="list-group-item"><a href="#fields" class="reference internal ripple">поля</a><ul ><li class="list-group-item"><a href="#basic-fields" class="reference internal ripple">Основные поля</a></li><li class="list-group-item"><a href="#advanced-fields" class="reference internal ripple">Расширенные поля</a><ul ><li class="list-group-item"><a href="#date-time-fields" class="reference internal ripple">Дата (время) Поля</a></li><li class="list-group-item"><a href="#relational-fields" class="reference internal ripple">Реляционные поля</a></li><li class="list-group-item"><a href="#pseudo-relational-fields" class="reference internal ripple">Псевдореляционные поля</a></li><li class="list-group-item"><a href="#computed-fields" class="reference internal ripple">Вычисляемые поля</a></li><li class="list-group-item"><a href="#related-fields" class="reference internal ripple">Связанные поля</a></li></ul></li><li class="list-group-item"><a href="#automatic-fields" class="reference internal ripple">Автоматические поля</a></li><li class="list-group-item"><a href="#reserved-field-names" class="reference internal ripple">Зарезервированные имена полей</a></li></ul></li><li class="list-group-item"><a href="#recordsets" class="reference internal ripple">наборы записей</a><ul ><li class="list-group-item"><a href="#field-access" class="reference internal ripple">Доступ к полю</a></li><li class="list-group-item"><a href="#record-cache-and-prefetching" class="reference internal ripple">Запись кеша и предварительная выборка</a></li></ul></li><li class="list-group-item"><a href="#module-odoo.api" class="reference internal ripple">Метод декораторов</a></li><li class="list-group-item"><a href="#environment" class="reference internal ripple">Окружающая обстановка</a><ul ><li class="list-group-item"><a href="#altering-the-environment" class="reference internal ripple">Изменение окружающей среды</a></li><li class="list-group-item"><a href="#sql-execution" class="reference internal ripple">Выполнение SQL</a></li></ul></li><li class="list-group-item"><a href="#common-orm-methods" class="reference internal ripple">Общие методы ORM</a><ul ><li class="list-group-item"><a href="#create-update" class="reference internal ripple">Создание / обновление</a></li><li class="list-group-item"><a href="#search-read" class="reference internal ripple">Поиск / Чтение</a><ul ><li class="list-group-item"><a href="#fields-views" class="reference internal ripple">Поля / Просмотров</a></li><li class="list-group-item"><a href="#search-domains" class="reference internal ripple">Поиск доменов</a></li></ul></li><li class="list-group-item"><a href="#unlink" class="reference internal ripple">Unlink</a></li><li class="list-group-item"><a href="#record-set-information" class="reference internal ripple">Запись (установка) информации</a></li><li class="list-group-item"><a href="#operations" class="reference internal ripple">операции</a><ul ><li class="list-group-item"><a href="#filter" class="reference internal ripple">Фильтр</a></li><li class="list-group-item"><a href="#map" class="reference internal ripple">карта</a></li><li class="list-group-item"><a href="#sort" class="reference internal ripple">Сортировать</a></li></ul></li></ul></li><li class="list-group-item"><a href="#inheritance-and-extension" class="reference internal ripple">Наследование и расширение</a><ul ><li class="list-group-item"><a href="#classical-inheritance" class="reference internal ripple">Классическое наследство</a></li><li class="list-group-item"><a href="#extension" class="reference internal ripple">расширение</a></li><li class="list-group-item"><a href="#delegation" class="reference internal ripple">Делегация</a></li><li class="list-group-item"><a href="#fields-incremental-definition" class="reference internal ripple">Поля Инкрементальное Определение</a></li></ul></li><li class="list-group-item"><a href="#module-odoo.exceptions" class="reference internal ripple">Управление ошибками</a></li></ul>
              
              <p class="gith-container"><a href="https://github.com/odoo/odoo/edit/13.0/doc/reference/orm.rst" class="gith-link">
                  Edit on GitHub
              </a></p>
              
            </div>
          </aside>
          
          <article class="doc-body ">
            
            
  <section id="module-odoo.models"><i id="orm-api"></i><i id="reference-orm"></i><dl ><dt >Модуль реляционного отображения объектов:</dt><dd ><ul ><li >Иерархическая структура</li><li >Ограничения согласованности и проверки</li><li >Метаданные объекта зависят от его статуса</li><li >Оптимизированная обработка сложного запроса (несколько действий одновременно)</li><li >Значения полей по умолчанию</li><li >Оптимизация разрешений</li><li >Постоянный объект: БД postgresql</li><li >Конверсия данных</li><li >Многоуровневая система кеширования</li><li >Два разных механизма наследования</li><li ><dl ><dt >Богатый набор типов полей:</dt><dd ><ul ><li >классический (varchar, integer, boolean, …)</li><li >реляционный (one2many, many2one, many2many)</li><li >функциональная</li></ul></dd></dl></li></ul></dd></dl></section><section id="models"><i id="reference-orm-model"></i><i id="reference-orm-models"></i><h2 >модели</h2><p >Поля модели определяются как атрибуты самой модели:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">odoo</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">fields</span>
<span class="k">class</span> <span class="nc">AModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;a.model.name&#39;</span>

    <span class="n">field1</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">()</span>
</pre></div>
</div>
<div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >это означает, что вы не можете определить поле и метод с одним и тем же именем, последнее будет молча перезаписывать первые.</p></div><p >По умолчанию метка поля (видимое пользователем имя) является заглавной версией имени поля, это можно переопределить с помощью параметра `` string``.</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">field2</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s2">&quot;Field Label&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >Список типов полей и параметров см . <a href="#reference-fields" class="reference internal"><span class="std std-ref">the fields reference</span></a>.</p><p >Значения по умолчанию определяются как параметры полей, либо как значение</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;a value&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >или как функция, вызываемая для вычисления значения по умолчанию, которое должно возвращать это значение</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_default_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>

<span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_name</span><span class="p">())</span>
</pre></div>
</div>
<h3 >API</h3><section class="code-class"><h6 id="odoo.models.BaseModel"><code><em >class </em>odoo.models.BaseModel<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L239" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Базовый класс для моделей Odoo.</p><p >Модели Odoo создаются путем наследования одного из следующих:</p><ul ><li ><a href="#odoo.models.Model" title="odoo.models.Model" class="alert-link reference internal"><code class="xref py py-class">Model</code></a> for regular database-persisted models</li><li ><a href="#odoo.models.TransientModel" title="odoo.models.TransientModel" class="alert-link reference internal"><code class="xref py py-class">TransientModel</code></a> for temporary data, stored in the database but
automatically vacuumed every so often</li><li ><a href="#odoo.models.AbstractModel" title="odoo.models.AbstractModel" class="alert-link reference internal"><code class="xref py py-class">AbstractModel</code></a> for abstract super classes meant to be shared by
multiple inheriting models</li></ul><p >Система автоматически создает каждую модель один раз для каждой базы данных. Эти экземпляры представляют доступные модели в каждой базе данных и зависят от того, какие модули установлены в этой базе данных. Фактический класс каждого экземпляра создается из классов Python, которые создаются и наследуются от соответствующей модели.</p><p >Каждый экземпляр модели представляет собой «набор записей», т. Е. Упорядоченный набор записей модели. Наборы записей возвращаются такими методами, как <a href="#odoo.models.Model.browse" title="odoo.models.Model.browse" class="alert-link reference internal"><code class="py-meth xref py">browse()</code></a>, <a href="#odoo.models.Model.browse" title="odoo.models.Model.browse" class="alert-link reference internal"><code class="py-meth xref py">browse()</code></a> или доступ к полям. Записи не имеют явного представления: запись представляется как набор записей из одной записи.</p><p >Чтобы создать класс, экземпляр которого не нужно создавать, атрибуту: attr: <code >~ odoo.models.BaseModel._register</code> можно присвоить значение False.</p><section class="code-attribute"><h6 id="odoo.models.BaseModel._auto"><code>_auto<em > = False</em></code></h6><p >Должна ли быть создана таблица базы данных (по умолчанию: `` True``). Если установлено значение `` False``, переопределите <code class="py-meth xref py">init()</code>, чтобы создать таблицу базы данных.</p><div role="alert" class="alert alert-info"><h3 class="alert-title">Совет</h3><p >Чтобы создать модель без какой-либо таблицы, наследуйте от <a href="#odoo.models.AbstractModel" title="odoo.models.AbstractModel" class="alert-link reference internal"><code class="xref py py-class">AbstractModel</code></a>.</p></div></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._table"><code>_table<em > = None</em></code></h6><p >Имя таблицы SQL, используемое моделью, если: attr: <code >_auto</code></p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._sequence"><code>_sequence<em > = None</em></code></h6><p >Последовательность SQL для использования в поле идентификатора</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._sql_constraints"><code>_sql_constraints<em > = []</em></code></h6><p >Ограничения SQL [(name, sql_def, message)]</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._register"><code>_register<em > = True</em></code></h6><p >не отображается в реестре ORM</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._name"><code>_name<em > = None</em></code></h6><p >название модели (в точечной нотации, пространство имен модуля)</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._description"><code>_description<em > = None</em></code></h6><p >неофициальное название модели</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._inherit"><code>_inherit<em > = None</em></code></h6><p >Унаследованные от Python модели:</p><div class="code-fields"><div class="code-field"><div class="code-field-name">тип</div><div class="code-field-body">ул или список (ул)</div></div></div><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><ul ><li >Если установлено: attr: <code >._name</code>, имена наследуемых родительских моделей</li><li >Если: attr: <code >._name</code> не установлено, имя отдельной модели для расширения на месте</li></ul></div></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._inherits"><code>_inherits<em > = {}</em></code></h6><p >dictionary {'parent_model': 'm2o_field'}, отображающий _name родительских бизнес-объектов на имена соответствующих полей внешнего ключа для использования</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">_inherits</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;a.model&#39;</span><span class="p">:</span> <span class="s1">&#39;a_field_id&#39;</span><span class="p">,</span>
    <span class="s1">&#39;b.model&#39;</span><span class="p">:</span> <span class="s1">&#39;b_field_id&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p >реализует наследование на основе композиции: новая модель предоставляет все поля унаследованных моделей, но не хранит ни одно из них: сами значения сохраняются в связанной записи.</p><div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >если в моделях, связанных с: attr: <code >~ odoo.models.Model._inherits</code>, определены несколько полей с одним и тем же именем, то унаследованное поле будет соответствовать последнему (в порядке следования списка наследований).</p></div></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._rec_name"><code>_rec_name<em > = None</em></code></h6><p >поле, используемое для маркировки записей, по умолчанию: `` name``</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._order"><code>_order<em > = 'id'</em></code></h6><p >поле заказа по умолчанию для результатов поиска</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._check_company_auto"><code>_check_company_auto<em > = False</em></code></h6><p >При записи и создании вызовите `` _check_company``, чтобы обеспечить согласованность компаний в реляционных полях, имеющих в качестве атрибута `` check_company = True``.</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._parent_name"><code>_parent_name<em > = 'parent_id'</em></code></h6><p >поле many2one, используемое в качестве родительского поля</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._parent_store"><code>_parent_store<em > = False</em></code></h6><p >установите значение True для вычисления поля parent_path.</p><p >Наряду с полем: attr: <code >~ .parent_path</code> устанавливает индексированное хранилище древовидной структуры записей, чтобы обеспечить более быстрые иерархические запросы к записям текущей модели с использованием доменов` <code >child_of`</code> и` <code >parent_of`</code> операторы.</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._abstract"><code>_abstract<em > = True</em></code></h6><p >является ли модель абстрактной</p></section><div role="alert" class="alert alert-go_to"><h3 class="alert-title">См.также</h3><p >: Класс: <code >odoo.models.AbstractModel</code></p></div><section class="code-attribute"><h6 id="odoo.models.BaseModel._transient"><code>_transient<em > = False</em></code></h6><p >является ли модель переходной</p></section><div role="alert" class="alert alert-go_to"><h3 class="alert-title">См.также</h3><p >: Класс: <code >odoo.models.TransientModel</code></p></div><section class="code-attribute"><h6 id="odoo.models.BaseModel._date_name"><code>_date_name<em > = 'date'</em></code></h6><p >поле для использования в календаре по умолчанию</p></section><section class="code-attribute"><h6 id="odoo.models.BaseModel._fold_name"><code>_fold_name<em > = 'fold'</em></code></h6><p >поле для определения свернутых групп в представлениях канбан</p></section></section></section><section id="abstractmodel"><h3 >AbstractModel</h3><section class="code-attribute"><h6 id="odoo.models.AbstractModel"><code>odoo.models.AbstractModel<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L239" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >псевдоним класса <a href="#odoo.models.BaseModel" title="odoo.models.BaseModel" class="alert-link reference internal"><code class="xref py py-class">odoo.models.BaseModel</code></a></p></section></section><section id="model"><h3 >модель</h3><section class="code-class"><h6 id="odoo.models.Model"><code><em >class </em>odoo.models.Model<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L6162" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Главный суперкласс для обычных моделей Odoo, сохраняемых в базе данных.</p><p >Модели Odoo создаются путем наследования от этого класса:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">user</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p >Позднее система создаст экземпляр класса один раз для каждой базы данных (в которой установлен модуль класса).</p></section></section><section id="transientmodel"><h3 >TransientModel</h3><section class="code-class"><h6 id="odoo.models.TransientModel"><code><em >class </em>odoo.models.TransientModel<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L6178" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Модель суперкласса для временных записей, предназначенная для временного хранения и регулярной очистки пылесосом.</p><p >TransientModel имеет упрощенное управление правами доступа, все пользователи могут создавать новые записи и могут иметь доступ только к тем записям, которые они создали. Суперпользователь имеет неограниченный доступ ко всем записям TransientModel.</p></section></section><section id="fields"><i id="reference-orm-fields"></i><i id="reference-fields"></i><h2 >поля</h2><section class="code-class"><h6 id="odoo.fields.Field"><code><em >class </em>odoo.fields.Field<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L101" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Дескриптор поля содержит определение поля и управляет доступом и назначениями соответствующего поля в записях. Следующие атрибуты могут быть предоставлены при создании экземпляра поля:</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >string</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – метка поля, видимого пользователями; если не установлено, ORM принимает имя поля в классе (с большой буквы).</li><li ><strong >help</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – всплывающая подсказка пользователя</li><li ><strong >readonly</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – является ли поле доступным только для чтения (по умолчанию: `` False``). Это влияет только на пользовательский интерфейс. Любое назначение поля в коде будет работать (если поле является сохраненным или необратимым).</li><li ><strong >required</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – требуется ли значение поля (по умолчанию: `` False``)</li><li ><strong >index</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – индексируется ли поле в базе данных. Примечание: не влияет на несохраненные и виртуальные поля. (по умолчанию: `` False``)</li><li ><strong >default</strong> (<code >value</code><code > or </code><code >callable</code>) – значение по умолчанию для поля; это либо статическое значение, либо функция, принимающая набор записей и возвращающая значение; используйте `` default = None``, чтобы отменить значения по умолчанию для поля</li><li ><strong >states</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="external reference alert-link"><code >dict</code></a>) – словарь отображает значения состояния в списки пар атрибут-значение пользовательского интерфейса; Возможные атрибуты: `` readonly``, `` required``, `` invisible``. .. warning :: Любое условие на основе состояния требует, чтобы значение поля `` state`` было доступно в пользовательском интерфейсе на стороне клиента. Обычно это делается путем включения его в соответствующие представления, которые, возможно, делаются невидимыми, если они не актуальны для конечного пользователя.</li><li ><strong >groups</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – разделенный запятыми список идентификаторов группы xml (строка); это ограничивает доступ к полю только пользователям указанных групп</li><li ><strong >company_dependent</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – зависит ли значение поля от текущей компании; Значение не сохраняется в таблице модели. Он зарегистрирован как <code >ir.property</code>. Когда требуется значение поля company_dependent, выполняется поиск в ir.property, который связывается с текущей компанией (и текущей записью, если существует одно свойство). Если значение изменяется в записи, оно либо изменяет существующее свойство для текущей записи (если оно существует), либо создает новое для текущей компании и res_id. Если значение будет изменено на стороне компании, это повлияет на все записи, для которых значение не было изменено.</li><li ><strong >copy</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – следует ли копировать значение поля при дублировании записи (по умолчанию: `` True`` для нормальных полей, `` False`` для `` one2many`` и вычисляемых полей, включая поля свойств и связанные поля)</li><li ><strong >store</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – хранится ли поле в базе данных (по умолчанию: `` True``, `` False`` для вычисляемых полей)</li><li ><strong >group_operator</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – <p >агрегатная функция, используемая <a href="#odoo.models.Model.read_group" title="odoo.models.Model.read_group" class="alert-link reference internal"><code class="py-meth xref py">read_group()</code></a> при группировке по этому полю.</p><p >Поддерживаемые агрегатные функции:</p><ul ><li >`` array_agg``: значения, включая нули, объединены в массив</li><li >`` count``: количество строк</li><li >`` count_distinct``: количество отдельных строк</li><li >`` bool_and``: true, если все значения верны, иначе false</li><li >`` bool_or``: true, если хотя бы одно значение равно true, в противном случае - false</li><li >`` max``: максимальное значение всех значений</li><li >`` min``: минимальное значение всех значений</li><li >`` avg``: среднее (среднее арифметическое) всех значений</li><li >`` sum``: сумма всех значений</li></ul></li><li ><strong >group_expand</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – <p >function used to expand read_group results when grouping on
the current field.</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">model</span>
<span class="k">def</span> <span class="nf">_read_group_selection_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;choice1&#39;</span><span class="p">,</span> <span class="s1">&#39;choice2&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="c1"># available selection choices.</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">model</span>
<span class="k">def</span> <span class="nf">_read_group_many2one_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">records</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">records</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">search</span><span class="p">([</span><span class="n">custom_domain</span><span class="p">])</span>
</pre></div>
</div>
</li></ul></div></div></div><h3 >Вычисляемые поля</h3><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >compute</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – имя метода, который вычисляет поле .. seealso :: <a href="#reference-fields-compute" class="alert-link reference internal"><span class="std std-ref">Advanced Fields/Compute fields</span></a></li><li ><strong >compute_sudo</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – следует ли повторно вычислять поле как суперпользователя для обхода прав доступа (по умолчанию `` True`` для сохраненных полей, `` False`` для не сохраненных полей)</li><li ><strong >inverse</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – имя метода, который инвертирует поле (необязательно)</li><li ><strong >search</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – имя метода, реализующего поиск по полю (необязательно)</li><li ><strong >related</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – последовательность имен полей .. seealso :: <a href="#reference-fields-related" class="alert-link reference internal"><span class="std std-ref">Advanced fields/Related fields</span></a></li></ul></div></div></div></section></section><section id="basic-fields"><i id="reference-fields-basic"></i><h3 >Основные поля</h3><section class="code-class"><h6 id="odoo.fields.Boolean"><code><em >class </em>odoo.fields.Boolean<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1131" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section><section class="code-class"><h6 id="odoo.fields.Char"><code><em >class </em>odoo.fields.Char<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1474" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Базовое строковое поле может быть ограничено по длине, как правило, отображаться в строке как одна строка в клиентах.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >size</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a>) – максимальный размер значений, хранящихся для этого поля</li><li ><strong >trim</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – указывает, будет ли значение обрезано или нет (по умолчанию `` True``). Обратите внимание, что операция обрезки применяется только веб-клиентом.</li><li ><strong >translate</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a><code > or </code><code >callable</code>) – включить перевод значений поля; используйте `` translate = True`` для перевода значений поля в целом; `` translate`` также может вызываться так, что `` translate (callback, value) `` переводит `` value`` с помощью `` callback (term) `` для получения перевода терминов.</li></ul></div></div></div></section><section class="code-class"><h6 id="odoo.fields.Float"><code><em >class </em>odoo.fields.Float<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1183" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >The precision digits are given by the (optional) digits attribute.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >digits</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(в Python v3.8)" class="external reference alert-link"><code >tuple</code></a><code >(</code><a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a><code >,</code><a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a><code >) or </code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – a pair (total, decimal) or a string referencing a
<code class="xref py py-class">DecimalPrecision</code> record name.</div></div></div></section><section class="code-class"><h6 id="odoo.fields.Integer"><code><em >class </em>odoo.fields.Integer<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1145" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section></section><section id="advanced-fields"><i id="reference-fields-advanced"></i><h3 >Расширенные поля</h3><section class="code-class"><h6 id="odoo.fields.Binary"><code><em >class </em>odoo.fields.Binary<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1827" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section><section class="code-class"><h6 id="odoo.fields.Html"><code><em >class </em>odoo.fields.Html<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1554" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section><section class="code-class"><h6 id="odoo.fields.Image"><code><em >class </em>odoo.fields.Image<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L2011" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section><section class="code-class"><h6 id="odoo.fields.Monetary"><code><em >class </em>odoo.fields.Monetary<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1248" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Десятичная точность и символ валюты берутся из атрибута</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >currency_field</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – название поля, содержащего валюту, в которой выражено это денежное поле (по умолчанию: <code >&amp;#39;currency_id&amp;#39;</code>)</div></div></div></section><section class="code-class"><h6 id="odoo.fields.Selection"><code><em >class </em>odoo.fields.Selection<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L2051" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >selection</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="external reference alert-link"><code >list</code></a><code >(</code><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(в Python v3.8)" class="external reference alert-link"><code >tuple</code></a><code >(</code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a><code >,</code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a><code >)</code><code >) or </code><code >callable</code><code > or </code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – указывает возможные значения для этого поля. Он задается либо как список пар `` (значение, метка) <a href="#id1"><span id="id2" class="problematic">``</span></a>, либо как метод модели, либо как имя метода.</li><li ><strong >selection_add</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="external reference alert-link"><code >list</code></a><code >(</code><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(в Python v3.8)" class="external reference alert-link"><code >tuple</code></a><code >(</code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a><code >,</code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a><code >)</code><code >)</code>) – обеспечивает расширение выбора в случае переопределенного поля. Это список пар `` (значение, метка) `` или синглетонов `` (значение,) <a href="#id1"><span id="id2" class="problematic">``</span></a>, где значения синглтона должны появляться в переопределенном выборе. Новые значения вставляются в порядке, который соответствует переопределенному выбору, и этот список :: selection = [('a', 'A'), ('b', 'B')] selection_add = [('c' , 'C'), ('b',)]&amp;gt; result = [('a', 'A'), ('c', 'C'), ('b', 'B')]</li></ul></div></div></div><p >Атрибут `` selection`` является обязательным, за исключением случаев `` related`` или расширенных полей.</p></section><section class="code-class"><h6 id="odoo.fields.Text"><code><em >class </em>odoo.fields.Text<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1533" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Очень похоже на <a href="#odoo.fields.Char" title="odoo.fields.Char" class="alert-link reference internal"><code class="xref py py-class">Char</code></a>, но используется для более длинного содержимого, не имеет размера и обычно отображается в виде многострочного текстового поля.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >translate</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a><code > or </code><code >callable</code>) – включить перевод значений поля; используйте `` translate = True`` для перевода значений поля в целом; `` translate`` также может вызываться так, что `` translate (callback, value) `` переводит `` value`` с помощью `` callback (term) `` для получения перевода терминов.</div></div></div></section></section><section id="date-time-fields"><i id="reference-fields-date"></i><h4 >Дата (время) Поля</h4><p >Дата и время являются очень важными областями в любом бизнес-приложении, они интенсивно используются во многих популярных приложениях Odoo, таких как логистика или бухгалтерский учет, и их неправильное использование может создавать невидимые, но болезненные ошибки. Цель этого отрывка - дать разработчикам Odoo знания, необходимые для Избегайте неправильного использования этих полей.</p><p >При назначении значения полю Date / Datetime допустимы следующие параметры:</p><ul ><li >Объект <code >date</code> или` datetime`.</li><li >Строка в правильном формате сервера * (ГГГГ-ММ-ДД) * для полей даты, * (ГГГГ-ММ-ДД ЧЧ: ММ: СС) * для полей даты и времени.</li><li >«Ложь» или «Нет».</li></ul><p >Класс полей Date и Datetime имеет вспомогательные методы для попытки преобразования в совместимый тип: <a href="#odoo.fields.Date.to_date" title="odoo.fields.Date.to_date" class="reference internal"><code class="xref py py-func">to_date()</code></a> преобразует в объект` datetime.date`, а <a href="#odoo.fields.Date.to_date" title="odoo.fields.Date.to_date" class="reference internal"><code class="xref py py-func">to_date()</code></a> преобразуется в <code >datetime.datetime</code>.</p><div role="alert" class="alert admonition-example"><h3 class="alert-title">пример</h3><p >Для анализа даты / даты, поступающих из внешних источников:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">fields</span><span class="o">.</span><span class="n">Date</span><span class="o">.</span><span class="n">to_date</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;date_from&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div><p >Лучшие практики сравнения даты и времени:</p><ul ><li >Поля даты можно ** только ** сравнивать с объектами даты.</li><li >Поля даты и времени можно ** только ** сравнивать с объектами даты и времени.</li></ul><div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >Строки, представляющие даты и даты и времени, можно сравнивать между собой, однако результат может не соответствовать ожидаемому результату, поскольку строка даты и времени всегда будет больше, чем строка даты, поэтому такая практика ** сильно ** не рекомендуется.</p></div><p >Обычные операции с датами и датами, такие как сложение, вычитание или извлечение начала / конца периода, доступны через <a href="#odoo.fields.Date" title="odoo.fields.Date" class="reference internal"><code class="xref py py-class">Date</code></a> и <a href="#odoo.fields.Date" title="odoo.fields.Date" class="reference internal"><code class="xref py py-class">Date</code></a>. Эти помощники также доступны путем импорта <code >odoo.tools.date_utils</code>.</p><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >Часовые пояса</p><p >Поля даты и времени хранятся как столбцы <code >timestamp без часового пояса</code> в базе данных и хранятся в часовом поясе UTC. Это сделано специально, так как делает базу данных Odoo независимой от часового пояса хост-сервера. Преобразование часового пояса полностью управляется клиентской стороной.</p></div><section class="code-class"><h6 id="odoo.fields.Date"><code><em >class </em>odoo.fields.Date<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1615" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Этот тип поля инкапсулирует объект даты Python. : введите дату:</p><section class="code-staticmethod"><h6 id="odoo.fields.Date.add"><code><em >static </em>add(<em>value</em>, <em>*args</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L178" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть сумму `` value`` и a <code class="xref py py-class">relativedelta</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – начальная дата или дата / время</li><li ><strong >args</strong> – позиционные аргументы для прямой передачи <code class="xref py py-class">relativedelta</code>.</li><li ><strong >kwargs</strong> – Аргументы для ключевого слова, которые необходимо передать непосредственно <code class="xref py py-class">relativedelta</code>.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">итоговая дата / дата / время.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.context_today"><code><em >static </em>context_today(<em>record</em>, <em>timestamp=None</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1636" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть текущую дату, как видно из часового пояса клиента, в формате, подходящем для полей даты.</p><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >Этот метод может использоваться для вычисления значений по умолчанию.</p></div><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >record</strong> – набор записей, из которого будет получен часовой пояс.</li><li ><strong >timestamp</strong> (<code >datetime</code>) – необязательное значение даты и времени, используемое вместо текущей даты и времени (должно быть датой и временем, обычные даты не могут быть преобразованы между часовыми поясами).</li></ul></div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">date</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.end_of"><code><em >static </em>end_of(<em>value</em>, <em>granularity</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L139" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Получить конец периода времени от даты или даты и времени.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – начальная дата или дата / время</li><li ><strong >granularity</strong> – Тип периода в строке может быть годом, кварталом, месяцем, неделей, днем или часом.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">Объект date / datetime, соответствующий началу указанного периода.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.start_of"><code><em >static </em>start_of(<em>value</em>, <em>granularity</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L100" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Получить начало периода времени с даты или даты / времени.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – начальная дата или дата / время</li><li ><strong >granularity</strong> – тип периода в строке, может быть год, квартал, месяц, неделя, день или час.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">объект date / datetime, соответствующий началу указанного периода.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.subtract"><code><em >static </em>subtract(<em>value</em>, <em>*args</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L190" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть разницу между `` value`` и a <code class="xref py py-class">relativedelta</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – начальная дата или дата / время</li><li ><strong >args</strong> – позиционные аргументы для прямой передачи <code class="xref py py-class">relativedelta</code>.</li><li ><strong >kwargs</strong> – Аргументы для ключевого слова, которые необходимо передать непосредственно <code class="xref py py-class">relativedelta</code>.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">итоговая дата / дата / время.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.to_date"><code><em >static </em>to_date(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1661" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Попытайтесь преобразовать `` value`` в объект <code class="xref py py-class">date</code>.</p><div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >Если в качестве значения задан объект datetime, он будет преобразован в объект date, и вся информация, относящаяся к дате и времени, будет потеряна (HMS, TZ, …).</p></div><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >value</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a><code > or </code><code >date</code><code > or </code><code >datetime</code>) – значение для преобразования.</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">объект, представляющий `` значение``.</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">date or <a href="https://docs.python.org/3/library/constants.html#None" title="(в Python v3.8)" class="external reference alert-link">None</a></div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.to_string"><code><em >static </em>to_string(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1689" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Преобразуйте объект <code class="xref py py-class">date</code> или <code class="xref py py-class">date</code> в строку.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >value</strong> – значение для преобразования.</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">строка, представляющая `` значение`` в формате даты сервера, если `` значение`` имеет тип <code class="xref py py-class">datetime</code>, часы, минуты, секунды, tzinfo будут усечены.</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link">str</a></div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Date.today"><code><em >static </em>today(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1628" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть текущий день в формате, ожидаемом ORM.</p><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >Эта функция может быть использована для вычисления значений по умолчанию.</p></div></section></section><section class="code-class"><h6 id="odoo.fields.Datetime"><code><em >class </em>odoo.fields.Datetime<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1716" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Этот тип поля инкапсулирует объект datetime Python. : введите datetime:</p><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.add"><code><em >static </em>add(<em>value</em>, <em>*args</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L178" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть сумму `` value`` и a <code class="xref py py-class">relativedelta</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – начальная дата или дата / время</li><li ><strong >args</strong> – позиционные аргументы для прямой передачи <code class="xref py py-class">relativedelta</code>.</li><li ><strong >kwargs</strong> – Аргументы для ключевого слова, которые необходимо передать непосредственно <code class="xref py py-class">relativedelta</code>.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">итоговая дата / дата / время.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.context_timestamp"><code><em >static </em>context_timestamp(<em>record</em>, <em>timestamp</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1743" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть указанную метку времени, преобразованную в часовой пояс клиента.</p><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >Этот метод * не * предназначен для использования в качестве инициализатора по умолчанию, поскольку поля даты и времени автоматически преобразуются при отображении на стороне клиента. Для значений по умолчанию следует использовать <a href="#odoo.fields.Datetime.now" title="odoo.fields.Datetime.now" class="alert-link reference internal"><code class="py-meth xref py">now()</code></a>.</p></div><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >record</strong> – набор записей, из которого будет получен часовой пояс.</li><li ><strong >timestamp</strong> (<code >datetime</code>) – исходное значение даты и времени (выраженное в UTC) для преобразования в часовой пояс клиента.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">метка времени преобразуется в дату / время с учетом часового пояса в контексте часового пояса.</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">datetime</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.end_of"><code><em >static </em>end_of(<em>value</em>, <em>granularity</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L139" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Получить конец периода времени от даты или даты и времени.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – начальная дата или дата / время</li><li ><strong >granularity</strong> – Тип периода в строке может быть годом, кварталом, месяцем, неделей, днем или часом.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">Объект date / datetime, соответствующий началу указанного периода.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.now"><code><em >static </em>now(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1729" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть текущий день и время в формате, ожидаемом ORM.</p><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >Эта функция может быть использована для вычисления значений по умолчанию.</p></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.start_of"><code><em >static </em>start_of(<em>value</em>, <em>granularity</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L100" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Получить начало периода времени с даты или даты / времени.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – начальная дата или дата / время</li><li ><strong >granularity</strong> – тип периода в строке, может быть год, квартал, месяц, неделя, день или час.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">объект date / datetime, соответствующий началу указанного периода.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.subtract"><code><em >static </em>subtract(<em>value</em>, <em>*args</em>, <em>**kwargs</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/tools/date_utils.py#L190" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть разницу между `` value`` и a <code class="xref py py-class">relativedelta</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >value</strong> – начальная дата или дата / время</li><li ><strong >args</strong> – позиционные аргументы для прямой передачи <code class="xref py py-class">relativedelta</code>.</li><li ><strong >kwargs</strong> – Аргументы для ключевого слова, которые необходимо передать непосредственно <code class="xref py py-class">relativedelta</code>.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">итоговая дата / дата / время.</div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.to_datetime"><code><em >static </em>to_datetime(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1771" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Преобразуйте `` значение`` ORM в значение <code class="xref py py-class">datetime</code>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >value</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a><code > or </code><code >date</code><code > or </code><code >datetime</code>) – значение для преобразования.</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">объект, представляющий `` значение``.</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">datetime or <a href="https://docs.python.org/3/library/constants.html#None" title="(в Python v3.8)" class="external reference alert-link">None</a></div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.to_string"><code><em >static </em>to_string(<em>value</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1796" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Преобразуйте объект <code class="xref py py-class">datetime</code> или <code class="xref py py-class">datetime</code> в строку.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >value</strong> (<code >datetime</code><code > or </code><code >date</code>) – значение для преобразования.</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">строка, представляющая `` значение`` в формате даты и времени сервера, если `` значение`` имеет тип <code class="xref py py-class">date</code>, часть времени будет полуночной (00:00:00).</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link">str</a></div></div></div></section><section class="code-staticmethod"><h6 id="odoo.fields.Datetime.today"><code><em >static </em>today(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L1738" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть текущий день в полночь (00:00:00).</p></section></section></section><section id="relational-fields"><i id="reference-fields-relational"></i><h4 >Реляционные поля</h4><section class="code-class"><h6 id="odoo.fields.Many2one"><code><em >class </em>odoo.fields.Many2one<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L2308" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Значением такого поля является набор записей размером 0 (без записи) или 1 (одна запись).</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >comodel_name</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – название целевой модели `` Mandatory``, за исключением связанных или расширенных полей.</li><li ><strong >domain</strong> – необязательный домен для установки значений кандидата на стороне клиента (домен или строка)</li><li ><strong >context</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="external reference alert-link"><code >dict</code></a>) – необязательный контекст для использования на стороне клиента при обработке этого поля</li><li ><strong >ondelete</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – что делать, если указанная запись удалена; Возможные значения: `` 'set null'``, <code >&amp;#39; restrict&amp;#39;</code>, `` 'cascade'``</li><li ><strong >auto_join</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – генерируются ли JOIN при поиске по этому полю (по умолчанию: `` False``)</li><li ><strong >delegate</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – установите его в `` True``, чтобы сделать поля целевой модели доступными из текущей модели (соответствует `` _inherits``)</li><li ><strong >check_company</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – Отметьте поле для проверки в <a href="../howtos/company.html#odoo.models.Model._check_company" title="odoo.models.Model._check_company" class="alert-link reference internal"><code class="py-meth xref py">_check_company()</code></a>. Добавьте домен компании по умолчанию в зависимости от атрибутов поля.</li></ul></div></div></div></section><section class="code-class"><h6 id="odoo.fields.One2many"><code><em >class </em>odoo.fields.One2many<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L2801" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >One2many поле; значение такого поля является набором записей всех записей в `` comodel_name``, так что поле `` inverse_name`` равно текущей записи.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >comodel_name</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – название целевой модели</li><li ><strong >inverse_name</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – имя обратного поля `` Many2one`` в `` comodel_name``</li><li ><strong >domain</strong> – необязательный домен для установки значений кандидата на стороне клиента (домен или строка)</li><li ><strong >context</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="external reference alert-link"><code >dict</code></a>) – необязательный контекст для использования на стороне клиента при обработке этого поля</li><li ><strong >auto_join</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – генерируются ли JOIN при поиске по этому полю (по умолчанию: `` False``)</li><li ><strong >limit</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a>) – необязательный лимит для использования при чтении</li></ul></div></div></div><p >Атрибуты `` comodel_name`` и `` inverse_name`` являются обязательными, за исключением случаев, связанных с полями или расширениями полей.</p></section><section class="code-class"><h6 id="odoo.fields.Many2many"><code><em >class </em>odoo.fields.Many2many<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L3064" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Many2many поле; значение такого поля - набор записей.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >comodel_name</strong> – имя целевой модели (строка) обязательно, за исключением случаев связанных или расширенных полей</li><li ><strong >relation</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – необязательное имя таблицы, в которой хранится отношение в базе данных</li><li ><strong >column1</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – необязательное имя столбца, ссылающегося на «эти» записи в таблице «отношение»</li><li ><strong >column2</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – необязательное имя столбца, ссылающегося на «те» записи в таблице «отношение»</li></ul></div></div></div><p >Атрибуты `` отношение``, `` column1`` и `` column2`` являются необязательными. Если не указано, имена автоматически генерируются из имен моделей, при условии, что `` model_name`` и `` comodel_name`` различаются!</p><p >Обратите внимание, что наличие нескольких полей с неявными параметрами отношения в данной модели с одним и тем же comodel не принимается ORM, так как эти поля будут использовать одну и ту же таблицу. ORM не позволяет двум многим многим полям использовать одинаковые параметры отношения, кроме случаев, когда</p><ul ><li >оба поля используют одну и ту же модель, параметры комоделя и отношения являются явными; или</li><li >по крайней мере одно поле принадлежит модели с `` _auto = False``.</li></ul><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >domain</strong> – необязательный домен для установки значений кандидата на стороне клиента (домен или строка)</li><li ><strong >context</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="external reference alert-link"><code >dict</code></a>) – необязательный контекст для использования на стороне клиента при обработке этого поля</li><li ><strong >check_company</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – Отметьте поле для проверки в <a href="../howtos/company.html#odoo.models.Model._check_company" title="odoo.models.Model._check_company" class="alert-link reference internal"><code class="py-meth xref py">_check_company()</code></a>. Добавьте домен компании по умолчанию в зависимости от атрибутов поля.</li><li ><strong >limit</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a>) – необязательный лимит для использования при чтении</li></ul></div></div></div></section></section><section id="pseudo-relational-fields"><h4 >Псевдореляционные поля</h4><section class="code-class"><h6 id="odoo.fields.Reference"><code><em >class </em>odoo.fields.Reference<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L2201" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section><section class="code-class"><h6 id="odoo.fields.Many2oneReference"><code><em >class </em>odoo.fields.Many2oneReference<a href="https://github.com/odoo/odoo/blob/13.0/odoo/fields.py#L2537" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section></section><section id="computed-fields"><i id="reference-fields-compute"></i><h4 >Вычисляемые поля</h4><p >Поля могут быть вычислены (вместо чтения прямо из базы данных) с помощью параметра `` compute``. ** Он должен присвоить вычисленное значение полю <a href="#id1"><span id="id2" class="problematic">**</span></a>. Если он использует значения других * полей <a href="#id3"><span id="id4" class="problematic">*</span></a>, он должен указывать эти поля, используя <a href="#odoo.api.depends" title="odoo.api.depends" class="reference internal"><code class="xref py py-func">depends()</code></a>.</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">odoo</span> <span class="kn">import</span> <span class="n">api</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_total&#39;</span><span class="p">)</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;tax&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">record</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">record</span><span class="o">.</span><span class="n">tax</span>
</pre></div>
</div>
<ul ><li ><p >зависимости могут быть пунктирными путями при использовании подполей</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">&#39;line_ids.value&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="n">record</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">line_ids</span><span class="p">)</span>
</pre></div>
</div>
</li><li >вычисляемые поля не сохраняются по умолчанию, они вычисляются и возвращаются по запросу. Установка `` store = True`` сохранит их в базе данных и автоматически разрешит поиск.</li><li ><p >поиск по вычисляемому полю также можно включить, установив параметр `` search``. Значением является имя метода, возвращающее <a href="#reference-orm-domains" class="reference internal"><span class="std std-ref">Поиск доменов</span></a>.</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">upper_name</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_upper&#39;</span><span class="p">,</span> <span class="n">search</span><span class="o">=</span><span class="s1">&#39;_search_upper&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_search_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;like&#39;</span><span class="p">:</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="s1">&#39;ilike&#39;</span>
    <span class="k">return</span> <span class="p">[(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">)]</span>
</pre></div>
</div>
<p >Метод поиска вызывается при обработке доменов перед выполнением фактического поиска по модели. Он должен возвращать домен, эквивалентный условию: `` значение оператора поля``.</p></li></ul><ul ><li ><p >По умолчанию вычисляемые поля доступны только для чтения. Чтобы разрешить * установку * значений в вычисляемом поле, используйте параметр `` inverse``. Это имя функции, обращающей вычисления и устанавливающей соответствующие поля:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">document</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_get_document&#39;</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="s1">&#39;_set_document&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_get_document</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">get_document_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">record</span><span class="o">.</span><span class="n">document</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">_set_document</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="o">.</span><span class="n">document</span><span class="p">:</span> <span class="k">continue</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">get_document_path</span><span class="p">())</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">document</span><span class="p">)</span>
</pre></div>
</div>
</li><li ><p >несколько полей могут быть вычислены одновременно одним и тем же методом, просто используйте один и тот же метод для всех полей и установите их все:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">discount_value</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_apply_discount&#39;</span><span class="p">)</span>
<span class="n">total</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_apply_discount&#39;</span><span class="p">)</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;discount&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_apply_discount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="c1"># compute actual discount from discount percentage</span>
        <span class="n">discount</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">record</span><span class="o">.</span><span class="n">discount</span>
        <span class="n">record</span><span class="o">.</span><span class="n">discount_value</span> <span class="o">=</span> <span class="n">discount</span>
        <span class="n">record</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">discount</span>
</pre></div>
</div>
</li></ul></section><section id="related-fields"><i id="reference-fields-related"></i><h4 >Связанные поля</h4><p >Частным случаем вычисляемых полей являются * связанные * (прокси) поля, которые предоставляют значение подполя в текущей записи. Они определяются путем установки параметра `` related`` и, подобно обычным вычисляемым полям, они могут храниться</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nickname</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">related</span><span class="o">=</span><span class="s1">&#39;user_id.partner_id.name&#39;</span><span class="p">,</span> <span class="n">store</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p >Значение связанного поля определяется последовательностью реляционных полей и чтением поля в достигнутой модели. Полная последовательность полей для прохождения определяется атрибутом `` related``.</p><p >Некоторые атрибуты поля автоматически копируются из исходного поля, если они не переопределены: `` строка``, `` help``, `` readonly``, `` required`` (только если все поля в последовательности являются обязательными) , `` groups``, `` digits``, `` size``, `` translate``, `` sanitize``, `` selection``, `` comodel_name``, `` domain``, ` <code >context`</code>. Все атрибуты без семантики копируются из исходного поля.</p><p >По умолчанию значения связанных полей не сохраняются в базе данных. Добавьте атрибут `` store = True``, чтобы сохранить его, как вычисляемые поля. Связанные поля автоматически пересчитываются при изменении их зависимостей.</p><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >Связанные поля вычисляются в режиме sudo.</p></div></section><section id="automatic-fields"><i id="reference-fields-automatic"></i><h3 >Автоматические поля</h3><section class="code-attribute"><h6 id="odoo.fields.id"><code>odoo.fields.id</code></h6><p >Идентификатор: класс: <a href="#id1"><span id="id2" class="problematic">`</span></a>поле &lt;odoo.fields.Field&gt; `</p><p >Если длина текущего набора записей равна 1, вернуть идентификатор уникальной записи в нем.</p><p >В противном случае выведите ошибку.</p></section><section class="code-attribute"><h6 id="odoo.fields.create_date"><code>odoo.fields.create_date</code></h6><p >: Класс: <code >~ odoo.fields.Datetime</code></p></section><section class="code-attribute"><h6 id="odoo.fields.create_uid"><code>odoo.fields.create_uid</code></h6><p >: Класс: <code >~ odoo.fields.Many2one</code></p></section><section class="code-attribute"><h6 id="odoo.fields.write_date"><code>odoo.fields.write_date</code></h6><p >: Класс: <code >~ odoo.fields.Datetime</code></p></section><section class="code-attribute"><h6 id="odoo.fields.write_uid"><code>odoo.fields.write_uid</code></h6><p >: Класс: <code >~ odoo.fields.Many2one</code></p></section></section><section id="reserved-field-names"><i id="reference-orm-fields-reserved"></i><h3 >Зарезервированные имена полей</h3><p >Несколько имен полей зарезервированы для предопределенного поведения, выходящего за пределы автоматизированных полей. Они должны быть определены в модели, когда требуется соответствующее поведение:</p><section class="code-attribute"><h6 id="odoo.fields.name"><code>odoo.fields.name</code></h6><p >значение по умолчанию для: attr: <code >~ odoo.models.BaseModel._rec_name</code>, используется для отображения записей в контексте, где необходимо репрезентативное« именование ».</p><p >: Класс: <code >~ odoo.fields.Char</code></p></section><section class="code-attribute"><h6 id="odoo.fields.active"><code>odoo.fields.active</code></h6><p >переключает глобальную видимость записи, если `` active`` установлен на `` False``, запись невидима в большинстве поисков и списков.</p><p >: Класс: <code >~ odoo.fields.Boolean</code></p></section><section class="code-attribute"><h6 id="odoo.fields.state"><code>odoo.fields.state</code></h6><p >Этапы жизненного цикла объекта, используемые атрибутом `` states`` в <a href="#odoo.fields.Field" title="odoo.fields.Field" class="alert-link reference internal"><code class="xref py py-class">fields</code></a>.</p><p >: Класс: <code >~ odoo.fields.Selection</code></p></section><section class="code-attribute"><h6 id="odoo.fields.parent_id"><code>odoo.fields.parent_id</code></h6><p >default_value of: attr: <code >~ ._parent_name</code>, используется для организации записей в древовидной структуре и включает операторы` <code >child_of`</code> и` <code >parent_of`</code> в доменах.</p><p >: Класс: <code >~ odoo.fields.Many2one</code></p></section><section class="code-attribute"><h6 id="odoo.fields.parent_path"><code>odoo.fields.parent_path</code></h6><p >Когда: attr: <code >~ ._parent_store</code> имеет значение True, используется для хранения значения, отражающего древовидную структуру: attr:` ~ ._parent_name`, и для оптимизации операторов `` child_of`` и `` parent_of`` в поиск доменов. Он должен быть объявлен с помощью `` index = True`` для правильной работы.</p><p >: Класс: <code >~ odoo.fields.Char</code></p></section><section class="code-attribute"><h6 id="odoo.fields.company_id"><code>odoo.fields.company_id</code></h6><p >Имя основного поля, используемого для поведения нескольких компаний Odoo.</p><p >Используется <code >: meth: ~ odoo.models._check_company</code> для проверки согласованности нескольких компаний. Определяет, распределяется ли запись между компаниями (не имеет значения) или доступна только пользователям данной компании.</p><p ><a href="#odoo.fields.Many2one" title="odoo.fields.Many2one" class="alert-link reference internal"><code class="xref py py-class">Many2one</code></a>
:type: <code class="xref py py-class">res_company</code></p></section></section><section id="recordsets"><h2 >наборы записей</h2><p >Взаимодействие с моделями и записями осуществляется через наборы записей, упорядоченный набор записей одной и той же модели.</p><div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >Вопреки тому, что следует из названия, в настоящее время наборы записей могут содержать дубликаты. Это может измениться в будущем.</p></div><p >Методы, определенные в модели, выполняются для набора записей, и их `` self`` является набором записей</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;a.model&#39;</span>
    <span class="k">def</span> <span class="nf">a_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># self can be anything between 0 records and all records in the</span>
        <span class="c1"># database</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">do_operation</span><span class="p">()</span>
</pre></div>
</div>
<p >Повторение набора записей даст новые наборы * одной записи * (<code >одиночные записи</code>), так же, как повторение строки Python дает строки из одного символа:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="c1"># =&gt; a.model(1, 2, 3, 4, 5)</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">record</span><span class="p">)</span> <span class="c1"># =&gt; a.model(1), then a.model(2), then a.model(3), ...</span>
</pre></div>
</div>
</section><section id="field-access"><h3 >Доступ к полю</h3><p >Наборы записей предоставляют интерфейс «Активная запись»: поля модели могут быть считаны и записаны непосредственно из записи как атрибуты.</p><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >При доступе к нереляционным полям в наборе записей из потенциально нескольких записей используйте <code class="py-meth xref py">mapped()</code></p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">total_qty</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s1">&#39;qty&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div><p >Доступ к значениям поля также возможен как элементы dict, что более элегантно и безопасно, чем `` getattr () `` для динамических имен полей. Установка значения поля запускает обновление базы данных:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="o">.</span><span class="n">name</span>
<span class="go">Example Name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="o">.</span><span class="n">company_id</span><span class="o">.</span><span class="n">name</span>
<span class="go">Company Name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Bob&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;name&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">record</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>
<span class="go">Bob</span>
</pre></div>
</div>
<div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >Попытка прочитать поле в нескольких записях вызовет ошибку для нереляционных полей.</p></div><p >Доступ к реляционному полю ( <a href="#odoo.fields.Many2one" title="odoo.fields.Many2one" class="reference internal"><code class="xref py py-class">Many2one</code></a>, <a href="#odoo.fields.Many2one" title="odoo.fields.Many2one" class="reference internal"><code class="xref py py-class">Many2one</code></a>, <a href="#odoo.fields.Many2one" title="odoo.fields.Many2one" class="reference internal"><code class="xref py py-class">Many2one</code></a>) * всегда * возвращает набор записей, пустой, если поле не установлено.</p></section><section id="record-cache-and-prefetching"><h3 >Запись кеша и предварительная выборка</h3><p >Odoo поддерживает кэш для полей записей, так что не каждый доступ к полям вызывает запрос к базе данных, что может сказаться на производительности. В следующем примере запрашивается база данных только для первого оператора:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">record</span><span class="o">.</span><span class="n">name</span>             <span class="c1"># first access reads value from database</span>
<span class="n">record</span><span class="o">.</span><span class="n">name</span>             <span class="c1"># second access gets value from cache</span>
</pre></div>
</div>
<p >Чтобы избежать чтения одного поля в одной записи за раз, Odoo * предварительно выбирает * записи и поля, следуя некоторой эвристике, чтобы получить хорошую производительность. Как только поле должно быть прочитано в данной записи, ORM фактически читает это поле в большем наборе записей и сохраняет возвращенные значения в кеше для последующего использования. Предварительно выбранный набор записей обычно представляет собой набор записей, из которого запись поступает итерацией. Кроме того, все простые сохраненные поля (булево, целое число, число с плавающей запятой, символ, текст, дата, дата-время, выделение, many2one) извлекаются в целом; они соответствуют столбцам таблицы модели и эффективно извлекаются в том же запросе.</p><p >Рассмотрим следующий пример, где `` partners`` - это набор записей из 1000 записей. Без предварительной выборки цикл будет выполнять 2000 запросов к базе данных. При предварительной загрузке выполняется только один запрос:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">partner</span> <span class="ow">in</span> <span class="n">partners</span><span class="p">:</span>
    <span class="nb">print</span> <span class="n">partner</span><span class="o">.</span><span class="n">name</span>          <span class="c1"># first pass prefetches &#39;name&#39; and &#39;lang&#39;</span>
                                <span class="c1"># (and other fields) on all &#39;partners&#39;</span>
    <span class="nb">print</span> <span class="n">partner</span><span class="o">.</span><span class="n">lang</span>
</pre></div>
</div>
<p >Предварительная выборка также работает для * вторичных записей <a href="#id1"><span id="id2" class="problematic">*</span></a>: когда считываются реляционные поля, их значения (которые являются записями) подписываются для будущей предварительной выборки. Доступ к одной из этих вторичных записей приводит к предварительной выборке всех вторичных записей из той же модели. Это заставляет следующий пример генерировать только два запроса, один для партнеров и один для стран:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">countries</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="k">for</span> <span class="n">partner</span> <span class="ow">in</span> <span class="n">partners</span><span class="p">:</span>
    <span class="n">country</span> <span class="o">=</span> <span class="n">partner</span><span class="o">.</span><span class="n">country_id</span>        <span class="c1"># first pass prefetches all partners</span>
    <span class="n">countries</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">country</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>         <span class="c1"># first pass prefetches all countries</span>
</pre></div>
</div>
</section><section id="module-odoo.api"><i id="method-decorators"></i><i id="reference-api-decorators"></i><h2 >Метод декораторов</h2><p >Модуль API Odoo определяет среды Odoo и декораторы методов.</p><section class="code-function"><h6 id="odoo.api.depends"><code>odoo.api.depends(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L184" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть декоратор, который определяет зависимости полей метода «вычислить» (для полей функций нового стиля). Каждый аргумент должен быть строкой, состоящей из разделенной точками последовательности имен полей:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pname</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_pname&#39;</span><span class="p">)</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="s1">&#39;partner_id.name&#39;</span><span class="p">,</span> <span class="s1">&#39;partner_id.is_company&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_pname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">is_company</span><span class="p">:</span>
            <span class="n">record</span><span class="o">.</span><span class="n">pname</span> <span class="o">=</span> <span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">record</span><span class="o">.</span><span class="n">pname</span> <span class="o">=</span> <span class="n">record</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<p >Можно также передать одну функцию в качестве аргумента. В этом случае зависимости определяются вызовом функции с моделью поля.</p></section><section class="code-function"><h6 id="odoo.api.depends_context"><code>odoo.api.depends_context(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L209" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть декоратор, который определяет контекстные зависимости несохраненного метода «вычисления». Каждый аргумент является ключом в словаре контекста:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">price</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">compute</span><span class="o">=</span><span class="s1">&#39;_compute_product_price&#39;</span><span class="p">)</span>

<span class="nd">@api</span><span class="o">.</span><span class="n">depends_context</span><span class="p">(</span><span class="s1">&#39;pricelist&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_compute_product_price</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">product</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pricelist&#39;</span><span class="p">):</span>
            <span class="n">pricelist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;product.pricelist&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">browse</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;pricelist&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pricelist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;product.pricelist&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_default_pricelist</span><span class="p">()</span>
        <span class="n">product</span><span class="o">.</span><span class="n">price</span> <span class="o">=</span> <span class="n">pricelist</span><span class="o">.</span><span class="n">get_products_price</span><span class="p">(</span><span class="n">product</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
<p >Все зависимости должны быть хешируемыми. Следующие ключи имеют специальную поддержку:</p><ul ><li ><code >force_company</code> (значение в контексте или текущий идентификатор компании),</li><li ><code >uid</code> (текущий идентификатор пользователя и флаг суперпользователя),</li><li ><code >active_test</code> (значение в env.context или значение в field.context).</li></ul></section><section class="code-function"><h6 id="odoo.api.constrains"><code>odoo.api.constrains(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L101" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Украсьте проверку ограничений.</p><p >Каждый аргумент должен быть именем поля, используемого в проверке</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">constrains</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_check_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">record</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;Fields name and description must be different&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >Вызывается для записей, в которых было изменено одно из названных полей.</p><p >Должен поднять: exc: <code >~ odoo.exceptions.ValidationError</code>, если проверка не удалась.</p><div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >`` constrains`` поддерживает только простые имена полей, точечные имена (поля реляционных полей, например, `` partner_id.customer``) не поддерживаются и будут игнорироваться.</p><p >`` @ constrains`` будет запускаться только в том случае, если объявленные поля в оформленном методе включены в вызов `` create`` или `` write``. Это означает, что поля, отсутствующие в представлении, не будут вызывать вызов во время создания записи. Переопределение `` create`` необходимо, чтобы убедиться, что ограничение всегда будет срабатывать (например, для проверки отсутствия значения).</p></div></section><section class="code-function"><h6 id="odoo.api.onchange"><code>odoo.api.onchange(<em>*args</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L134" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть декоратор, чтобы украсить метод onchange для указанных полей.</p><p >В представлениях формы, где появляется поле, метод вызывается при изменении одного из указанных полей. Метод вызывается для псевдозаписи, содержащей значения, представленные в форме. Назначения полей в этой записи автоматически отправляются обратно клиенту.</p><p >Каждый аргумент должен быть именем поля</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">onchange</span><span class="p">(</span><span class="s1">&#39;partner_id&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_onchange_partner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Dear </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="p">{</span>
    <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;other_id&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;partner_id&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="n">partner_id</span><span class="p">)]},</span>
    <span class="s1">&#39;warning&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s2">&quot;What is this?&quot;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;notification&#39;</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p >Если тип установлен на уведомление, предупреждение будет отображаться в уведомлении. В противном случае он будет отображаться в диалоговом окне по умолчанию.</p><div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >`` @ onchange`` поддерживает только простые имена полей, точечные имена (поля реляционных полей, например, `` partner_id.tz``) не поддерживаются и будут игнорироваться</p></div><div role="alert" class="alert alert-danger"><h3 class="alert-title">Опасно</h3><p >Поскольку `` @ onchange`` возвращает набор псевдозаписей, вызывая любой из методов CRUD ( <code class="py-meth xref py">create()</code>, <code class="py-meth xref py">create()</code>, <code class="py-meth xref py">create()</code>, <code class="py-meth xref py">create()</code> ) в вышеупомянутом наборе записей не определено поведение, так как они потенциально еще не существуют в базе данных.</p><p >Вместо этого просто установите поле записи, как показано в примере выше, или вызовите метод <code class="py-meth xref py">update()</code>.</p></div><div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >Поле `` one2many`` или `` many2many`` не может изменить себя через onchange. Это ограничение веб-клиента - смотрите <a href="https://github.com/odoo/odoo/issues/2693" class="external reference alert-link"># 2693</a>.</p></div></section><section class="code-function"><h6 id="odoo.api.returns"><code>odoo.api.returns(<em>model</em>, <em>downgrade=None</em>, <em>upgrade=None</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L235" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть декоратор для методов, которые возвращают экземпляры `` model``.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >model</strong> – название модели или `` 'self'`` для текущей модели</li><li ><strong >downgrade</strong> – функция `` downgrade (self, value, * args, ** kwargs) `` для преобразования `` значения` в стиле записи в вывод в традиционном стиле</li><li ><strong >upgrade</strong> – функция `` upgrade (self, value, * args, ** kwargs) `` для преобразования традиционного стиля `` value`` в вывод в стиле записи</li></ul></div></div></div><p >Аргументы `` self``, `` * args`` и `` ** kwargs`` передаются методу в стиле записи.</p><p >Декоратор адаптирует вывод метода к стилю API: `` id``, `` ids`` или `` False`` для традиционного стиля и набор записей для стиля записи</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@model</span>
<span class="nd">@returns</span><span class="p">(</span><span class="s1">&#39;res.partner&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">find_partner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
    <span class="o">...</span>     <span class="c1"># return some record</span>

<span class="c1"># output depends on call style: traditional vs record style</span>
<span class="n">partner_id</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">find_partner</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>

<span class="c1"># recs = model.browse(cr, uid, ids, context)</span>
<span class="n">partner_record</span> <span class="o">=</span> <span class="n">recs</span><span class="o">.</span><span class="n">find_partner</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</pre></div>
</div>
<p >Обратите внимание, что декорированный метод должен удовлетворять этому условию.</p><p >Эти декораторы автоматически * наследуются <a href="#id1"><span id="id2" class="problematic">*</span></a>: метод, который переопределяет декорированный существующий метод, будет украшен тем же `` @returns (model) <a href="#id3"><span id="id4" class="problematic">``</span></a>.</p></section><section class="code-function"><h6 id="odoo.api.model"><code>odoo.api.model(<em>method</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L293" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Decorate a record-style method where <code >self</code> is a recordset, but its
contents is not relevant, only the model is. Such a method:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@api</span><span class="o">.</span><span class="n">model</span>
<span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</section><section class="code-function"><h6 id="odoo.api.model_create_multi"><code>odoo.api.model_create_multi(<em>method</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L339" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Украсьте метод, который берет список словарей и создает несколько записей. Метод может быть вызван либо с одним dict, либо со списком dicts:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">record</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>
<span class="n">records</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="n">vals</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
</pre></div>
</div>
</section></section><section id="environment"><i id="reference-orm-environment"></i><h2 >Окружающая обстановка</h2><p >Класс: <code >~ odoo.api.Environment</code> хранит различные контекстные данные, используемые ORM: курсор базы данных (для запросов к базе данных), текущий пользователь (для проверки прав доступа) и текущий контекст (хранение произвольных метаданных). Среда также хранит кэши.</p><p >Все наборы записей имеют постоянную среду, доступ к которой можно получить с помощью: attr: <code >~ odoo.models.Model.env</code> и которая обеспечивает доступ к:</p><ul ><li >текущий пользователь (: attr: <code >~ odoo.api.Environment.user</code>)</li><li >курсор (: attr: <code >~ odoo.api.Environment.cr</code>)</li><li >флаг суперпользователя (: attr: <code >~ odoo.api.Environment.su</code>)</li><li >или контекст (: attr: <code >~ odoo.api.Environment.context</code>)</li></ul><div class="highlight-bash"><div class="highlight"><pre><span></span>&gt;&gt;&gt; records.env
&lt;Environment object ...&gt;
&gt;&gt;&gt; records.env.user
res.user<span class="o">(</span><span class="m">3</span><span class="o">)</span>
&gt;&gt;&gt; records.env.cr
&lt;Cursor object ...<span class="o">)</span>
</pre></div>
</div>
<p >При создании набора записей из другого набора записей среда наследуется. Среду можно использовать для получения пустого набора записей в другой модели и запроса этой модели:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;res.partner&#39;</span><span class="p">]</span>
<span class="go">res.partner()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="p">[</span><span class="s1">&#39;res.partner&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">search</span><span class="p">([[</span><span class="s1">&#39;is_company&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;customer&#39;</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">]])</span>
<span class="go">res.partner(7, 18, 12, 14, 17, 19, 8, 31, 26, 16, 13, 20, 30, 22, 29, 15, 23, 28, 74)</span>
</pre></div>
</div>
<section class="code-method"><h6 id="odoo.api.Environment.ref"><code>Environment.ref(<em>xml_id</em>, <em>raise_if_not_found=True</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/api.py#L499" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть запись, соответствующую данному `` xml_id``.</p></section><section class="code-attribute"><h6 id="odoo.api.Environment.lang"><code>Environment.lang</code></h6><p >Вернуть текущий код языка.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link">str</a></div></div></div></section><section class="code-attribute"><h6 id="odoo.api.Environment.user"><code>Environment.user</code></h6><p >Вернуть текущего пользователя (как экземпляр).</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">: Класс: <code >~ odoo.addons.base.models.res_users</code></div></div></div></section><section class="code-attribute"><h6 id="odoo.api.Environment.company"><code>Environment.company</code></h6><p >Вернуть текущую компанию (как пример).</p><p >Если не указано в контексте (<code >allow_company_ids</code>), откат для основной компании текущего пользователя.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="alert-link reference internal"><strong >AccessError</strong></a> – недопустимое или неавторизованное содержимое ключа контекста <code >allow_company_ids</code>.</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">текущая компания (по умолчанию = <code >self.user.company_id</code>)</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">res.company</div></div></div><div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >В режиме sudo проверки работоспособности не применяются! В режиме sudo пользователь может получить доступ к любой компании, даже если он не в разрешенных им компаниях.</p><p >Это позволяет инициировать изменения внутри компании, даже если текущий пользователь не имеет доступа к целевой компании.</p></div></section><section class="code-attribute"><h6 id="odoo.api.Environment.companies"><code>Environment.companies</code></h6><p >Вернуть пользователю набор записей включенных компаний.</p><p >Если не указано в контексте (<code >enabled_company_ids</code>), откат для текущих компаний-пользователей.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="alert-link reference internal"><strong >AccessError</strong></a> – недопустимое или неавторизованное содержимое ключа контекста <code >allow_company_ids</code>.</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">текущие компании (по умолчанию = <code >self.user.company_ids</code>)</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">res.company</div></div></div><div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >В режиме sudo проверки работоспособности не применяются! В режиме sudo пользователь может получить доступ к любой компании, даже если он не в разрешенных им компаниях.</p><p >Это позволяет инициировать изменения внутри компании, даже если текущий пользователь не имеет доступа к целевой компании.</p></div></section></section><section id="altering-the-environment"><h3 >Изменение окружающей среды</h3><section class="code-method"><h6 id="odoo.models.Model.with_context"><code>Model.with_context(<em>[context][, **overrides]</em>) → records<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5062" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Возвращает новую версию этого набора записей, прикрепленную к расширенному контексту.</p><p >Расширенный контекст является либо предоставленным «контекстом», в котором «переопределения» объединены, либо «текущим» контекстом, в котором «переопределения» объединены, например:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># current context is {&#39;key1&#39;: True}</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">with_context</span><span class="p">({},</span> <span class="n">key2</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># -&gt; r2._context is {&#39;key2&#39;: True}</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">records</span><span class="o">.</span><span class="n">with_context</span><span class="p">(</span><span class="n">key2</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># -&gt; r2._context is {&#39;key1&#39;: True, &#39;key2&#39;: True}</span>
</pre></div>
</div>
</section><section class="code-method"><h6 id="odoo.models.Model.with_user"><code>Model.with_user(<em>user</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5051" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть новую версию этого набора записей, прикрепленную к данному пользователю, в режиме, не являющемся суперпользователем, если пользователь не является суперпользователем (по договоренности суперпользователь всегда находится в режиме суперпользователя).</p></section><section class="code-method"><h6 id="odoo.models.Model.with_env"><code>Model.with_env(<em>env</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5005" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть новую версию этого набора записей, прикрепленную к предоставленной среде.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >env</strong> (<code class="xref py py-class">Environment</code>) – </div></div></div><div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >Новая среда не извлечет выгоду из кэша данных текущей среды, поэтому более поздний доступ к данным может повлечь дополнительные задержки при повторном извлечении из базы данных. Возвращенный набор записей имеет тот же объект предварительной выборки, что и `` self``.</p></div></section><section class="code-method"><h6 id="odoo.models.Model.sudo"><code>Model.sudo([<em>flag=True</em>])<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5019" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Возвращает новую версию этого набора записей с включенным или отключенным режимом суперпользователя, в зависимости от <code >flag</code>. Режим суперпользователя не меняет текущего пользователя и просто обходит проверки прав доступа.</p><div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >Использование `` sudo`` может привести к тому, что доступ к данным пересекает границы правил записей, возможно смешивая записи, которые должны быть изолированы (например, записи из разных компаний в многопрофильных средах).</p><p >Это может привести к не интуитивным результатам в методах, которые выбирают одну запись среди многих - например, получение компании по умолчанию или выбор спецификаций.</p></div><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >Поскольку правила записи и управление доступом придется пересмотреть, новый набор записей не получит преимущества от кэша данных текущей среды, поэтому более поздний доступ к данным может повлечь дополнительные задержки при повторном извлечении из базы данных. Возвращенный набор записей имеет тот же объект предварительной выборки, что и `` self``.</p></div></section></section><section id="sql-execution"><i id="reference-orm-sql"></i><h3 >Выполнение SQL</h3><p >Атрибут: attr: <code >~ odoo.api.Environment.cr</code> в средах является курсором для текущей транзакции базы данных и позволяет напрямую выполнять SQL, либо для запросов, которые трудно выразить с помощью ORM (например, сложные объединения), либо для производительности причины</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;some_sql&quot;</span><span class="p">,</span> <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">,</span> <span class="n">param3</span><span class="p">)</span>
</pre></div>
</div>
<p >Поскольку модели используют один и тот же курсор, а класс:: ~ ~ odoo.api.Environment` содержит различные кэши, эти кэши должны быть аннулированы при * изменении * базы данных в необработанном SQL, иначе дальнейшее использование моделей может стать непоследовательным. Кэши необходимо очищать при использовании `` CREATE``, `` <code >UPDATE`</code> или` <code >DELETE`</code> в SQL, но не` <code >SELECT`</code> (который просто читает базу данных).</p><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >Очистка кэша может быть выполнена с помощью метода <a href="#odoo.models.Model.invalidate_cache" title="odoo.models.Model.invalidate_cache" class="alert-link reference internal"><code class="py-meth xref py">invalidate_cache()</code></a>.</p></div><section class="code-method"><h6 id="odoo.models.Model.invalidate_cache"><code>Model.invalidate_cache(<em>fnames=None</em>, <em>ids=None</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5662" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Сделайте недействительными кэши записей после того, как некоторые записи были изменены. Если оба `` fnames`` и `` ids`` равны `` None``, весь кэш очищается.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >fnames</strong> – список измененных полей или `` None`` для всех полей</li><li ><strong >ids</strong> – список модифицированных идентификаторов записей или `` None`` для всех</li></ul></div></div></div></section><div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >Выполнение необработанного SQL обходит ORM и, как следствие, правила безопасности Odoo. Убедитесь, что ваши запросы очищены при использовании пользовательского ввода и предпочитаете использовать утилиты ORM, если вам действительно не нужно использовать SQL-запросы.</p></div></section><section id="common-orm-methods"><i id="reference-orm-models-crud"></i><h2 >Общие методы ORM</h2></section><section id="create-update"><h3 >Создание / обновление</h3><section class="code-method"><h6 id="odoo.models.Model.create"><code>Model.create(<em>vals_list</em>) → records<a href="https://github.com/odoo/odoo/blob/13.0/doc/&lt;decorator-gen-3&gt;#L3641" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Создает новые записи для модели.</p><p >Новые записи инициализируются с использованием значений из списка диктовок `` vals_list`` и, при необходимости, из <a href="#odoo.models.Model.default_get" title="odoo.models.Model.default_get" class="alert-link reference internal"><code class="py-meth xref py">default_get()</code></a>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >vals_list</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="external reference alert-link"><code >list</code></a>) – значения для полей модели в виде списка словарей :: [{'field_name': field_value, …}, …] Для обратной совместимости `` vals_list`` может быть словарем. Он обрабатывается как одноэлементный список `` [vals] <a href="#id1"><span id="id2" class="problematic">``</span></a>, и возвращается одна запись. смотрите <a href="#odoo.models.Model.write" title="odoo.models.Model.write" class="alert-link reference internal"><code class="py-meth xref py">write()</code></a> для деталей</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">созданные записи</div></div><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><ul ><li ><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="alert-link reference internal"><strong >AccessError</strong></a> – <ul ><li >если у пользователя нет прав на создание запрошенного объекта</li><li >если пользователь пытается обойти правила доступа для создания на запрашиваемом объекте</li></ul></li><li ><a href="#odoo.exceptions.ValidationError" title="odoo.exceptions.ValidationError" class="alert-link reference internal"><strong >ValidationError</strong></a> – если пользователь пытается ввести недопустимое значение для поля, которого нет в выделении</li><li ><a href="#odoo.exceptions.UserError" title="odoo.exceptions.UserError" class="alert-link reference internal"><strong >UserError</strong></a> – если цикл будет создан в иерархии объектов в результате операции (например, установка объекта в качестве своего родителя)</li></ul></div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.copy"><code>Model.copy(<em>default=None</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L4553" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Дублирующая запись `` self`` обновляет ее значениями по умолчанию</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >default</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="external reference alert-link"><code >dict</code></a>) – словарь значений полей для переопределения в исходных значениях копируемой записи, например: `` {'field_name': overridden_value, …} ``</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">новый рекорд</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.default_get"><code>Model.default_get(<em>fields</em>) → default_values<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1178" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть значения по умолчанию для полей в `` fields_list``. Значения по умолчанию определяются контекстом, пользовательскими настройками и самой моделью.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >fields_list</strong> – список имен полей</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">словарь, отображающий каждое имя поля в соответствующее значение по умолчанию, если оно есть.</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.name_create"><code>Model.name_create(<em>name</em>) → record<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1663" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Создайте новую запись, вызвав <a href="#odoo.models.Model.create" title="odoo.models.Model.create" class="alert-link reference internal"><code class="py-meth xref py">create()</code></a>, указав только одно значение: отображаемое имя новой записи.</p><p >Новая запись будет инициализирована с любыми значениями по умолчанию, применимыми к этой модели, или предоставлены через контекст. Применяется обычное поведение <a href="#odoo.models.Model.create" title="odoo.models.Model.create" class="alert-link reference internal"><code class="py-meth xref py">create()</code></a>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >name</strong> – отображаемое имя записи для создания</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(в Python v3.8)" class="external reference alert-link">tuple</a></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">значение пары <a href="#odoo.models.Model.name_get" title="odoo.models.Model.name_get" class="alert-link reference internal"><code class="py-meth xref py">name_get()</code></a> созданной записи</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.write"><code>Model.write(<em>vals</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L3391" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Обновляет все записи в текущем наборе с предоставленными значениями.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >vals</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="external reference alert-link"><code >dict</code></a>) – поля для обновления и значение для них, например: :: {'foo': 1, 'bar': <code >Qux</code>} установит поле `` foo`` в `` 1`` и поле `` bar` <code >to</code> `` Qux `` <a href="#id1"><span id="id2" class="problematic">`</span></a>если они действительны (в противном случае это вызовет ошибку).</div></div><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><ul ><li ><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="alert-link reference internal"><strong >AccessError</strong></a> – <ul ><li >если у пользователя нет прав записи на запрошенный объект</li><li >если пользователь пытается обойти правила доступа для записи на запрошенный объект</li></ul></li><li ><a href="#odoo.exceptions.ValidationError" title="odoo.exceptions.ValidationError" class="alert-link reference internal"><strong >ValidationError</strong></a> – если пользователь пытается ввести недопустимое значение для поля, которого нет в выделении</li><li ><a href="#odoo.exceptions.UserError" title="odoo.exceptions.UserError" class="alert-link reference internal"><strong >UserError</strong></a> – если цикл будет создан в иерархии объектов в результате операции (например, установка объекта в качестве своего родителя)</li></ul></div></div></div><ul ><li >Для числовых полей ( <a href="#odoo.fields.Integer" title="odoo.fields.Integer" class="alert-link reference internal"><code class="xref py py-class">Integer</code></a>, <a href="#odoo.fields.Integer" title="odoo.fields.Integer" class="alert-link reference internal"><code class="xref py py-class">Integer</code></a>) значение должно быть соответствующего типа</li><li >Для <a href="#odoo.fields.Boolean" title="odoo.fields.Boolean" class="alert-link reference internal"><code class="xref py py-class">Boolean</code></a>, значение должно быть <a href="#odoo.fields.Boolean" title="odoo.fields.Boolean" class="alert-link reference internal"><code class="xref py py-class">Boolean</code></a></li><li >Для <a href="#odoo.fields.Selection" title="odoo.fields.Selection" class="alert-link reference internal"><code class="xref py py-class">Selection</code></a>, значение должно соответствовать значениям выбора (обычно <a href="#odoo.fields.Selection" title="odoo.fields.Selection" class="alert-link reference internal"><code class="xref py py-class">Selection</code></a>, иногда <a href="#odoo.fields.Selection" title="odoo.fields.Selection" class="alert-link reference internal"><code class="xref py py-class">Selection</code></a>)</li><li >Для <a href="#odoo.fields.Many2one" title="odoo.fields.Many2one" class="alert-link reference internal"><code class="xref py py-class">Many2one</code></a> значение должно быть идентификатором базы данных для записи, которую нужно установить</li><li ><p >Другие нереляционные поля используют строку для значения</p><div role="alert" class="alert alert-danger"><h3 class="alert-title">Опасно</h3><p >по причинам истории и совместимости в полях <a href="#odoo.fields.Date" title="odoo.fields.Date" class="alert-link reference internal"><code class="xref py py-class">Date</code></a> и <a href="#odoo.fields.Date" title="odoo.fields.Date" class="alert-link reference internal"><code class="xref py py-class">Date</code></a> в качестве значений используются строки (записанные и прочитанные), а не <a href="#odoo.fields.Date" title="odoo.fields.Date" class="alert-link reference internal"><code class="xref py py-class">Date</code></a> или <a href="#odoo.fields.Date" title="odoo.fields.Date" class="alert-link reference internal"><code class="xref py py-class">Date</code></a>. Эти строки даты предназначены только для UTC и отформатированы в соответствии с: const: <code >odoo.tools.misc.DEFAULT_SERVER_DATE_FORMAT</code> и: const:` odoo.tools.misc.DEFAULT_SERVER_DATETIME_FORMAT`</p></div></li><li ><p id="openerp-models-relationals-format"><a href="#odoo.fields.One2many" title="odoo.fields.One2many" class="alert-link reference internal"><code class="xref py py-class">One2many</code></a> and
<a href="#odoo.fields.Many2many" title="odoo.fields.Many2many" class="alert-link reference internal"><code class="xref py py-class">Many2many</code></a> use a special «commands» format to
manipulate the set of records stored in/associated with the field.</p><p >Этот формат представляет собой список триплетов, выполняемых последовательно, где каждый триплет является командой для выполнения на множестве записей. Не все команды применяются во всех ситуациях. Возможные команды:</p><dl ><dt >`` (0, 0, значения) ``</dt><dd >добавляет новую запись, созданную из предоставленного `` значения``.</dd><dt >`` (1, id, значения) ``</dt><dd >обновляет существующую запись id `` id`` со значениями в `` values``. Не может использоваться в <a href="#odoo.models.Model.create" title="odoo.models.Model.create" class="alert-link reference internal"><code class="py-meth xref py">create()</code></a>.</dd><dt >`` (2, id, 0) ``</dt><dd >удаляет запись с идентификатором `` id`` из набора, затем удаляет ее (из базы данных). Не может использоваться в <a href="#odoo.models.Model.create" title="odoo.models.Model.create" class="alert-link reference internal"><code class="py-meth xref py">create()</code></a>.</dd><dt >`` (3, id, 0) ``</dt><dd >удаляет запись с идентификатором `` id`` из набора, но не удаляет ее. Не может использоваться в <a href="#odoo.models.Model.create" title="odoo.models.Model.create" class="alert-link reference internal"><code class="py-meth xref py">create()</code></a>.</dd><dt >`` (4, id, 0) ``</dt><dd >добавляет существующую запись с идентификатором `` id`` в набор.</dd><dt >`` (5, 0, 0) ``</dt><dd >удаляет все записи из набора, что эквивалентно явному использованию команды `` 3`` для каждой записи. Не может использоваться в <a href="#odoo.models.Model.create" title="odoo.models.Model.create" class="alert-link reference internal"><code class="py-meth xref py">create()</code></a>.</dd><dt >`` (6, 0, идентификаторы) ``</dt><dd >заменяет все существующие записи в наборе списком `` ids``, что эквивалентно использованию команды `` 5`` с последующей командой `` 4`` для каждого `` id`` в `` ids``.</dd></dl></li></ul></section><section class="code-method"><h6 id="odoo.models.Model.flush"><code>Model.flush(<em>fnames=None</em>, <em>records=None</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5368" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Обработайте все ожидающие повторные вычисления (или, по крайней мере, заданные имена полей <code >fnames</code>, если они есть) и сбросьте ожидающие обновления в базу данных.</p></section></section><section id="search-read"><h3 >Поиск / Чтение</h3><section class="code-method"><h6 id="odoo.models.Model.browse"><code>Model.browse([<em>ids</em>]) → records<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L4951" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Возвращает набор записей для идентификаторов, предоставленных в качестве параметра в текущей среде.</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">browse</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">12</span><span class="p">])</span>
<span class="n">res</span><span class="o">.</span><span class="n">partner</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >ids</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a><code > or </code><a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="external reference alert-link"><code >list</code></a><code >(</code><a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a><code >) or </code><a href="https://docs.python.org/3/library/constants.html#None" title="(в Python v3.8)" class="external reference alert-link"><code >None</code></a>) – Идентификатор (ы)</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">записей</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.search"><code>Model.search(<em>args[, offset=0][, limit=None][, order=None][, count=False]</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1598" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Поиск записей на основе `` args`` <a href="#reference-orm-domains" class="alert-link reference internal"><span class="std std-ref">search domain</span></a>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >args</strong> – <a href="#reference-orm-domains" class="alert-link reference internal"><span class="std std-ref">A search domain</span></a>. Use an empty
list to match all records.</li><li ><strong >offset</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a>) – количество игнорируемых результатов (по умолчанию: нет)</li><li ><strong >limit</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a>) – максимальное количество записей для возврата (по умолчанию: все)</li><li ><strong >order</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – сортировать строки</li><li ><strong >count</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – если True, только считает и возвращает количество совпадающих записей (по умолчанию: False)</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">не более `` limit`` записей, соответствующих критериям поиска</div></div><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="alert-link reference internal"><strong >AccessError</strong></a> – <ul ><li >если пользователь пытается обойти правила доступа для чтения на запрошенном объекте.</li></ul></div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.search_count"><code>Model.search_count(<em>args</em>) → int<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1588" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Возвращает количество записей в текущей модели <a href="#reference-orm-domains" class="alert-link reference internal"><span class="std std-ref">the provided domain</span></a>.</p></section><section class="code-method"><h6 id="odoo.models.Model.name_search"><code>Model.name_search(<em>name=''</em>, <em>args=None</em>, <em>operator='ilike'</em>, <em>limit=100</em>) → records<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1685" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Поиск записей с отображаемым именем, совпадающим с заданным шаблоном `` name``, по сравнению с указанным `` оператором``, а также с дополнительным доменом поиска (`` args``).</p><p >Это используется, например, для предоставления предложений на основе частичного значения для реляционного поля. Иногда рассматривается как обратная функция <a href="#odoo.models.Model.name_get" title="odoo.models.Model.name_get" class="alert-link reference internal"><code class="py-meth xref py">name_get()</code></a>, но это не гарантируется.</p><p >Этот метод эквивалентен вызову <a href="#odoo.models.Model.search" title="odoo.models.Model.search" class="alert-link reference internal"><code class="py-meth xref py">search()</code></a> с доменом поиска, основанным на` <code >display_name`</code>, а затем <a href="#odoo.models.Model.search" title="odoo.models.Model.search" class="alert-link reference internal"><code class="py-meth xref py">search()</code></a> в результате поиска.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >name</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – шаблон имени, чтобы соответствовать</li><li ><strong >args</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="external reference alert-link"><code >list</code></a>) – необязательный поисковый домен (см. синтаксис <a href="#odoo.models.Model.search" title="odoo.models.Model.search" class="alert-link reference internal"><code class="py-meth xref py">search()</code></a>) с указанием дальнейших ограничений</li><li ><strong >operator</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – оператор домена для сопоставления `` name``, например `` 'like'`` или <code >&amp;#39; = &amp;#39;</code>.</li><li ><strong >limit</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a>) – необязательное максимальное количество записей для возврата</li></ul></div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="external reference alert-link">list</a></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">список пар `` (id, text_repr) `` для всех подходящих записей.</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.read"><code>Model.read([<em>fields</em>])<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L2874" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Считывает запрошенные поля для записей в `` self``, метод низкого уровня / RPC. В коде Python предпочитайте <a href="#odoo.models.Model.browse" title="odoo.models.Model.browse" class="alert-link reference internal"><code class="py-meth xref py">browse()</code></a>.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >fields</strong> – список имен полей для возврата (по умолчанию все поля)</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">список словарей, сопоставляющих имена полей с их значениями, с одним словарем на запись</div></div><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="alert-link reference internal"><strong >AccessError</strong></a> – если у пользователя нет прав на чтение некоторых записей</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.read_group"><code>Model.read_group(<em>domain</em>, <em>fields</em>, <em>groupby</em>, <em>offset=0</em>, <em>limit=None</em>, <em>orderby=False</em>, <em>lazy=True</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L2104" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Получить список записей в виде списка, сгруппированных по заданным полям `` groupby``.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >domain</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="external reference alert-link"><code >list</code></a>) – <a href="#reference-orm-domains" class="alert-link reference internal"><span class="std std-ref">A search domain</span></a>. Use an empty
list to match all records.</li><li ><strong >fields</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="external reference alert-link"><code >list</code></a>) – список полей, присутствующих в представлении списка, указанного на объекте. Каждый элемент - это либо «поле» (имя поля с использованием агрегации по умолчанию), либо «поле: агг» (поле агрегирования с функцией агрегирования «агг») или «имя: агг (поле)» (поле агрегации с «агг» и вернуть его как «имя»). Возможные функции агрегирования предоставлены PostgreSQL (<a href="https://www.postgresql.org/docs/current/static/functions-aggregate.html" class="external reference alert-link">https://www.postgresql.org/docs/current/static/functions-aggregate.html</a>) и count_distinct с ожидаемым значением.</li><li ><strong >groupby</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="external reference alert-link"><code >list</code></a>) – список групповых описаний, по которым будут группироваться записи. Описание groupby - это либо поле (тогда оно будет сгруппировано по этому полю), либо строка 'field: groupby_function'. В настоящее время поддерживаются только функции «день», «неделя», «месяц», «квартал» или «год», и они имеют смысл только для полей даты / даты и времени.</li><li ><strong >offset</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a>) – необязательное количество записей для пропуска</li><li ><strong >limit</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a>) – необязательное максимальное количество записей для возврата</li><li ><strong >orderby</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="external reference alert-link"><code >list</code></a>) – необязательная спецификация `` order by`` для переопределения естественного порядка сортировки групп, см. также: py <code class="py-meth xref py">search()</code> (в настоящее время поддерживается только для многих полей)</li><li ><strong >lazy</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – если true, результаты группируются только по первому groupby, а оставшиеся groupbys помещаются в ключ __context. Если false, все groupbys выполняются за один вызов.</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">список словарей (по одному словарю для каждой записи), содержащий: * значения полей, сгруппированных по полям в аргументе `` groupby`` * __domain: список кортежей, определяющих критерии поиска * __context: словарь с аргументом типа `` groupby``</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">[{„field_name_1“: value, ..]</div></div><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="alert-link reference internal"><strong >AccessError</strong></a> – <ul ><li >если у пользователя нет прав на чтение запрошенного объекта</li><li >если пользователь пытается обойти правила доступа для чтения на запрошенном объекте</li></ul></div></div></div></section></section><section id="fields-views"><h4 >Поля / Просмотров</h4><section class="code-method"><h6 id="odoo.models.Model.fields_get"><code>Model.fields_get(<em>[fields][, attributes]</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L2752" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть определение каждого поля.</p><p >Возвращаемое значение представляет собой словарь (проиндексированный по имени поля) словарей. Поля _inherits'd включены. Атрибуты string, help и selection (если есть) переводятся.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >allfields</strong> – список полей для документа, все, если пусто или не предоставлено</li><li ><strong >attributes</strong> – список атрибутов описания, возвращаемых для каждого поля, все, если они пусты или не предоставлены</li></ul></div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.fields_view_get"><code>Model.fields_view_get([<em>view_id | view_type='form'</em>])<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1501" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Получите подробную композицию запрошенного вида, такую как поля, модель, архитектура вида</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >view_id</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a>) – идентификатор представления или нет</li><li ><strong >view_type</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – тип представления, которое нужно вернуть, если view_id равен None ('form', 'tree', …)</li><li ><strong >toolbar</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – верно включать контекстные действия</li><li ><strong >submenu</strong> – Устаревшее</li></ul></div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">состав запрошенного представления (включая унаследованные представления и расширения)</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(в Python v3.8)" class="external reference alert-link">dict</a></div></div><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><ul ><li ><a href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(в Python v3.8)" class="external reference alert-link"><strong >AttributeError</strong></a> – <ul ><li >если унаследованный вид имеет неизвестную позицию для работы, кроме «до», «после», «внутри», «заменить»</li><li >если какой-либо тег, отличный от позиции, найден в родительском представлении</li></ul></li><li ><strong >Invalid ArchitectureError</strong> – если в структуре определен тип представления, отличный от формы, дерева, календаря, поиска и т. д.</li></ul></div></div></div></section></section><section id="search-domains"><i id="reference-orm-domains"></i><h4 >Поиск доменов</h4><p >Домен - это список критериев, каждый из которых является тройкой (`` список`` или `` кортеж``) `` (field_name, operator, value) `` где:</p><ul ><li ><dl ><dt >`` field_name`` (`` str``)</dt><dd >имя поля текущей модели или обход отношений через <a href="#odoo.fields.Many2one" title="odoo.fields.Many2one" class="reference internal"><code class="xref py py-class">Many2one</code></a> с использованием точечной нотации, например,` <code >&amp;#39;улица&amp;#39;`</code> или` <code >&amp;#39; partner_id.country&amp;#39;`</code></dd></dl></li><li ><dl ><dt >`` оператор`` (`` str``)</dt><dd ><p >оператор, используемый для сравнения `` field_name`` с `` value``. Допустимые операторы:</p><dl ><dt >`` `` =</dt><dd >равно</dd><dt ><a href="#id1"><span id="id2" class="problematic">``</span></a>! = ``</dt><dd >не равно</dd><dt ><a href="#id1"><span id="id2" class="problematic">``</span></a>&amp;gt; ``</dt><dd >больше чем</dd><dt ><a href="#id1"><span id="id2" class="problematic">``</span></a>&amp;gt; = ``</dt><dd >больше или равно</dd><dt >`` &amp;lt; ``</dt><dd >меньше, чем</dd><dt >`` &amp;lt;= ``</dt><dd >меньше или равно</dd><dt >`` =? ``</dt><dd >unset или равно (возвращает true, если `` value`` равно `` None`` или `` False``, в противном случае ведет себя как `` = <a href="#id1"><span id="id2" class="problematic">``</span></a>)</dd><dt >`` = Like``</dt><dd >сопоставляет `` field_name`` с шаблоном `` value``. Символ подчеркивания `` <a href="#id1"><span id="id2" class="problematic">_`</span></a>` в шаблоне обозначает (соответствует) любой отдельный символ; знак процента <a href="#id3"><span id="id4" class="problematic">``</span></a>% `` соответствует любой строке из нуля или более символов.</dd><dt >`` Like``</dt><dd >сопоставляет `` field_name`` с шаблоном <code >% value% ``. Аналогично `` = like</code>, но перед сопоставлением `` value`` с '%'</dd><dt >`` не нравится``</dt><dd >не соответствует шаблону <a href="#id1"><span id="id2" class="problematic">``</span></a>% value% ``</dd><dt >`` ilike``</dt><dd >регистронезависимый `` лайк``</dd><dt >`` не илике``</dt><dd >регистронезависимый `` не нравится``</dd><dt >`` = Ilike``</dt><dd >без учета регистра `` = like``</dd><dt >`` in``</dt><dd >равно любому из элементов из `` value``, `` value`` должно быть списком элементов</dd><dt >`` не в``</dt><dd >не одинаков для всех предметов из `` value``</dd><dt >`` child_of``</dt><dd ><p >является потомком (потомком) записи `` значения`` (значение может быть либо одним элементом, либо списком элементов).</p><p >Принимает во внимание семантику модели (т. Е. После поля отношения, названного: attr: <code >~ odoo.models.Model._parent_name</code>).</p></dd><dt >`` parent_of``</dt><dd ><p >является родителем (наследником) записи `` значения`` (значение может быть либо одним элементом, либо списком элементов).</p><p >Принимает во внимание семантику модели (т. Е. После поля отношения, названного: attr: <code >~ odoo.models.Model._parent_name</code>).</p></dd></dl></dd></dl></li><li ><dl ><dt >`` Значения ``</dt><dd >тип переменной, должен быть сопоставим (через `` оператор``) с именованным полем.</dd></dl></li></ul><p >Критерии домена могут быть объединены с использованием логических операторов в форме * prefix <a href="#id1"><span id="id2" class="problematic">*</span></a>:</p><dl ><dt >'' '&amp;amp;' ``</dt><dd >логическая * И <a href="#id1"><span id="id2" class="problematic">*</span></a>, операция по умолчанию для объединения критериев, следующих друг за другом. Arity 2 (использует следующие 2 критерия или комбинации).</dd><dt >`` '|' ``</dt><dd >логический * ИЛИ <a href="#id1"><span id="id2" class="problematic">*</span></a>, арность 2.</dd><dt >`` '!' ``</dt><dd ><p >логический * НЕ <a href="#id1"><span id="id2" class="problematic">*</span></a>, арность 1.</p><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >Главным образом, чтобы отрицать комбинации критериев Индивидуальный критерий обычно имеет отрицательную форму (например, `` = `` -&amp;gt; <code >! = ``, `` &amp;lt;</code> -&amp;gt; <a href="#id1"><span id="id2" class="problematic">``</span></a>&amp;gt; = <a href="#id3"><span id="id4" class="problematic">``</span></a>), что проще, чем отрицание положительного ,</p></div></dd></dl><div role="alert" class="alert admonition-example"><h3 class="alert-title">пример</h3><p >Для поиска партнеров с именем * ABC * из Бельгии или Германии, чей язык не является английским:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="s1">&#39;ABC&#39;</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;language.code&#39;</span><span class="p">,</span><span class="s1">&#39;!=&#39;</span><span class="p">,</span><span class="s1">&#39;en_US&#39;</span><span class="p">),</span>
 <span class="s1">&#39;|&#39;</span><span class="p">,(</span><span class="s1">&#39;country_id.code&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="s1">&#39;be&#39;</span><span class="p">),</span>
     <span class="p">(</span><span class="s1">&#39;country_id.code&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="s1">&#39;de&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p >Этот домен интерпретируется как:</p><div class="highlight-text"><div class="highlight"><pre><span></span>    (name is &#39;ABC&#39;)
AND (language is NOT english)
AND (country is Belgium OR Germany)
</pre></div>
</div>
</div></section><section id="unlink"><h3 >Unlink</h3><section class="code-method"><h6 id="odoo.models.Model.unlink"><code>Model.unlink()<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L3299" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Удаляет записи текущего набора</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><ul ><li ><a href="#odoo.exceptions.AccessError" title="odoo.exceptions.AccessError" class="alert-link reference internal"><strong >AccessError</strong></a> – <ul ><li >если у пользователя нет прав на отмену ссылки на запрошенный объект</li><li >если пользователь пытается обойти правила доступа для отмены ссылки на запрошенный объект</li></ul></li><li ><a href="#odoo.exceptions.UserError" title="odoo.exceptions.UserError" class="alert-link reference internal"><strong >UserError</strong></a> – если запись является свойством по умолчанию для других записей</li></ul></div></div></div></section></section><section id="record-set-information"><i id="reference-orm-records-info"></i><h3 >Запись (установка) информации</h3><section class="code-attribute"><h6 id="odoo.models.Model.ids"><code>Model.ids</code></h6><p >Возвращает список фактических идентификаторов записей, соответствующих `` self``.</p></section><section class="code-attribute"><h6 id="odoo.models.env"><code>odoo.models.env</code></h6><p >Возвращает среду данного набора записей.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">тип</div><div class="code-field-body">: Класс: <code >~ odoo.api.Environment</code></div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.exists"><code>Model.exists() → records<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L4571" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Возвращает подмножество записей в `` self``, которые существуют, и помечает удаленные записи как таковые в кэше. Может использоваться в качестве теста на записях:</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p >По соглашению новые записи возвращаются как существующие.</p></section><section class="code-method"><h6 id="odoo.models.Model.ensure_one"><code>Model.ensure_one()<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L4992" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Убедитесь, что текущий набор записей содержит одну запись.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Исключение</div><div class="code-field-body"><strong >odoo.exceptions.ValueError</strong> – `` len (self)! = 1``</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.name_get"><code>Model.name_get() → [(id, name), ...]<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L1642" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Возвращает текстовое представление для записей в `` self``. По умолчанию это значение поля `` display_name``.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">список пар `` (id, text_repr) `` для каждой записи</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="external reference alert-link">list</a>(<a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(в Python v3.8)" class="external reference alert-link">tuple</a>)</div></div></div></section><section class="code-method"><h6 id="odoo.models.Model.get_metadata"><code>Model.get_metadata()<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L3062" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть некоторые метаданные о данных записях.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">список словарей владения для каждой запрашиваемой записи</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body">список словарей со следующими ключами: * id: идентификатор объекта * create_uid: пользователь, создавший запись * create_date: дата создания записи * write_uid: последний пользователь, изменивший запись * write_date: дата последнего изменения записи * xmlid: XML-идентификатор, используемый для ссылки на эту запись (если она есть), в формате `` module.name`` * noupdate: логическое значение, указывающее, будет ли запись обновлена или нет</div></div></div></section></section><section id="operations"><i id="reference-orm-records-operations"></i><h3 >операции</h3><p >Наборы записей являются неизменяемыми, но наборы одной и той же модели могут быть объединены с использованием различных операций над множествами, возвращая новые наборы записей.</p><ul ><li >`` record in set`` возвращает наличие `` record`` (который должен быть набором из 1 элемента) в `` set``. `` запись не в наборе`` является обратной операцией</li><li >`` set1 &amp;lt;= set2`` и `` set1 &amp;lt;set2`` возвращают, является ли `` set1`` подмножеством `` set2`` (соответственно строго)</li><li >`` set1&amp;gt; = set2`` и `` set1&amp;gt; set2`` возвращают, является ли `` set1`` надмножеством `` set2`` (соответственно строгим)</li><li >`` set1 | set2`` возвращает объединение двух наборов записей, новый набор записей, содержащий все записи, присутствующие в любом источнике</li><li >`` set1 &amp;amp; set2`` возвращает пересечение двух наборов записей, новый набор записей, содержащий только записи, присутствующие в обоих источниках</li><li >`` set1 - set2`` возвращает новый набор записей, содержащий только записи `` set1``, которые * не * в `` set2``</li></ul><p >Наборы записей являются итеративными, поэтому для преобразования доступны обычные инструменты Python ( <a href="https://docs.python.org/3/library/functions.html#map" title="(в Python v3.8)" class="external reference"><code >map()</code></a>, <a href="https://docs.python.org/3/library/functions.html#map" title="(в Python v3.8)" class="external reference"><code >map()</code></a>, <a href="https://docs.python.org/3/library/functions.html#map" title="(в Python v3.8)" class="external reference"><code >map()</code></a>, …), однако они возвращают или a <a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="external reference"><code >list</code></a> или a: term:` python: iterator`, исключая возможность вызова методов для их результата или использования операций над множествами.</p><p >Поэтому наборы записей предоставляют следующие операции, возвращающие сами наборы записей (когда это возможно):</p></section><section id="filter"><h4 >Фильтр</h4><section class="code-method"><h6 id="odoo.models.Model.filtered"><code>Model.filtered(<em>func</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5225" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Верните записи в `` self``, удовлетворяющие `` func``.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >func</strong> (<code >callable</code><code > or </code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – функция или разделенная точками последовательность имен полей</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">набор записей, удовлетворяющих функции, может быть пустым.</div></div></div><div class="highlight-python3"><div class="highlight"><pre><span></span><span class="c1"># only keep records whose company is the current user&#39;s</span>
<span class="n">records</span><span class="o">.</span><span class="n">filtered</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">company_id</span> <span class="o">==</span> <span class="n">user</span><span class="o">.</span><span class="n">company_id</span><span class="p">)</span>

<span class="c1"># only keep records whose partner is a company</span>
<span class="n">records</span><span class="o">.</span><span class="n">filtered</span><span class="p">(</span><span class="s2">&quot;partner_id.is_company&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section><section class="code-method"><h6 id="odoo.models.Model.filtered_domain"><code>Model.filtered_domain(<em>domain</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5245" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6></section></section><section id="map"><h4 >карта</h4><section class="code-method"><h6 id="odoo.models.Model.mapped"><code>Model.mapped(<em>func</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5173" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Примените `` func`` ко всем записям в `` self`` и верните результат в виде списка или набора записей (если `` func`` возвращает наборы записей). В последнем случае порядок возвращаемого набора записей является произвольным.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><strong >func</strong> (<code >callable</code><code > or </code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – функция или разделенная точками последовательность имен полей</div></div><div class="code-field"><div class="code-field-name">Результат</div><div class="code-field-body">self, если func ложно, результат func применяется ко всем записям `` self``.</div></div><div class="code-field"><div class="code-field-name">Тип результата</div><div class="code-field-body"><a href="https://docs.python.org/3/library/stdtypes.html#list" title="(в Python v3.8)" class="external reference alert-link">list</a> or recordset</div></div></div><div class="highlight-python3"><div class="highlight"><pre><span></span><span class="c1"># returns a list of summing two fields for each record in the set</span>
<span class="n">records</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">field1</span> <span class="o">+</span> <span class="n">r</span><span class="o">.</span><span class="n">field2</span><span class="p">)</span>
</pre></div>
</div>
<p >Предоставленная функция может быть строкой для получения значений поля:</p><div class="highlight-python3"><div class="highlight"><pre><span></span><span class="c1"># returns a list of names</span>
<span class="n">records</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>

<span class="c1"># returns a recordset of partners</span>
<span class="n">records</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s1">&#39;partner_id&#39;</span><span class="p">)</span>

<span class="c1"># returns the union of all partner banks, with duplicates removed</span>
<span class="n">records</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s1">&#39;partner_id.bank_ids&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >Since V13, multi-relational field access is supported and works like a mapped call:</p><div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">records</span><span class="o">.</span><span class="n">partner_id</span>  <span class="c1"># == records.mapped(&#39;partner_id&#39;)</span>
<span class="n">records</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">bank_ids</span>  <span class="c1"># == records.mapped(&#39;partner_id.bank_ids&#39;)</span>
<span class="n">records</span><span class="o">.</span><span class="n">partner_id</span><span class="o">.</span><span class="n">mapped</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>  <span class="c1"># == records.mapped(&#39;partner_id.name&#39;)</span>
</pre></div>
</div>
</div></section><section id="sort"><h4 >Сортировать</h4><section class="code-method"><h6 id="odoo.models.Model.sorted"><code>Model.sorted(<em>key=None</em>, <em>reverse=False</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/models.py#L5341" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Вернуть набор записей `` self``, упорядоченный по `` key``.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >key</strong> (<code >callable</code><code > or </code><a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a><code > or </code><a href="https://docs.python.org/3/library/constants.html#None" title="(в Python v3.8)" class="external reference alert-link"><code >None</code></a>) – либо функция с одним аргументом, которая возвращает ключ сравнения для каждой записи, либо имя поля, либо `` None``, в этом случае записи упорядочиваются в соответствии с порядком модели по умолчанию</li><li ><strong >reverse</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" title="(в Python v3.8)" class="external reference alert-link"><code >bool</code></a>) – если `` True``, вернуть результат в обратном порядке</li></ul></div></div></div><div class="highlight-python3"><div class="highlight"><pre><span></span><span class="c1"># sort records by name</span>
<span class="n">records</span><span class="o">.</span><span class="n">sorted</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</section></section><section id="inheritance-and-extension"><i id="reference-orm-inheritance"></i><h2 >Наследование и расширение</h2><p >Odoo предоставляет три различных механизма расширения моделей по модульному принципу:</p><ul ><li >создание новой модели из существующей, добавление новой информации в копию, но оставление исходного модуля без изменений</li><li >расширение моделей, определенных в других модулях на месте, заменив предыдущую версию</li><li >делегирование некоторых полей модели в записи, которые она содержит</li></ul><img src="../_images/inheritance_methods1.png" class="center-block img-responsive"></section><section id="classical-inheritance"><h3 >Классическое наследство</h3><p >При совместном использовании атрибутов: attr: <code >~ odoo.models.Model._inherit</code> и: attr:` ~ odoo.models.Model._name` Odoo создает новую модель, используя существующую (предоставляется через: attr: <code >~ odoo.models.Model._inherit</code>) в качестве базы. Новая модель получает все поля, методы и метаинформацию (по умолчанию и др.) Из своей базы.</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Inheritance0</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;inheritance.0&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Inheritance Zero&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s2">&quot;model 0&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;This is </span><span class="si">{}</span><span class="s2"> record </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Inheritance1</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;inheritance.1&#39;</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;inheritance.0&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Inheritance One&#39;</span>

    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="s2">&quot;model 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p >и используя их:</p><div class="highlight-python"><div class="highlight"><pre><span></span>        <span class="n">a</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;inheritance.0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">})</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;inheritance.1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;B&#39;</span><span class="p">})</span>
            <span class="n">a</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
            <span class="n">b</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
</pre></div>
</div>
<p >будет давать:</p><div class="highlight-text"><div class="highlight"><pre><span></span>            &quot;This is model 0 record A&quot;
            &quot;This is model 1 record B&quot;
</pre></div>
</div>
<p >вторая модель унаследовала от метода `` check`` и ее поля `` name`` первой модели, но переопределила метод `` call``, как при использовании стандарта <a href="https://docs.python.org/3/tutorial/classes.html#tut-inheritance" title="(в Python v3.8)" class="external reference"><span class="xref std std-ref">Python inheritance</span></a>.</p></section><section id="extension"><h3 >расширение</h3><p >При использовании: attr: <code >~ odoo.models.Model._inherit</code>, но без: attr:` ~ odoo.models.Model._name`, новая модель заменяет существующую, существенно расширяя ее на месте. Это полезно для добавления новых полей или методов в существующие модели (созданные в других модулях) или для их настройки или изменения (например, для изменения порядка сортировки по умолчанию):</p><div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Extension0</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;extension.0&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Extension zero&#39;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Extension1</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;extension.0&#39;</span>

    <span class="n">description</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;Extended&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>        <span class="n">record</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;extension.0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({})</span>
        <span class="n">record</span><span class="o">.</span><span class="n">read</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p >будет давать:</p><div class="highlight-text"><div class="highlight"><pre><span></span>        {&#39;name&#39;: &quot;A&quot;, &#39;description&#39;: &quot;Extended&quot;}
</pre></div>
</div>
<div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >это также даст различные :ref:<a href="#id1"><span id="id2" class="problematic">`</span></a>automatic fields &lt;reference/fields/automatic&gt;`если они не были отключены</p></div></section><section id="delegation"><h3 >Делегация</h3><p >Третий механизм наследования обеспечивает большую гибкость (его можно изменить во время выполнения), но меньшую мощность: использование: attr: <code >~ odoo.models.Model._inherits</code> модели * делегирует * поиск любого поля, не найденного в текущей модели «детским» моделям. Делегирование выполняется с помощью полей <a href="#odoo.fields.Reference" title="odoo.fields.Reference" class="reference internal"><code class="xref py py-class">Reference</code></a>, автоматически устанавливаемых в родительской модели.</p><p >Основное различие заключается в значении. При использовании Делегирования модель ** имеет один ** вместо <a href="#id1"><span id="id2" class="problematic">**</span></a>, равный одному <a href="#id3"><span id="id4" class="problematic">**</span></a>, превращая отношение в композицию вместо наследования:</p><div class="highlight-python"><div class="highlight"><pre><span></span>
<span class="k">class</span> <span class="nc">Screen</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;delegation.screen&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Screen&#39;</span>

    <span class="n">size</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Float</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;Screen Size in inches&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Keyboard</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;delegation.keyboard&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Keyboard&#39;</span>

    <span class="n">layout</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;Layout&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Laptop</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;delegation.laptop&#39;</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="s1">&#39;Laptop&#39;</span>

    <span class="n">_inherits</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;delegation.screen&#39;</span><span class="p">:</span> <span class="s1">&#39;screen_id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;delegation.keyboard&#39;</span><span class="p">:</span> <span class="s1">&#39;keyboard_id&#39;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;Name&#39;</span><span class="p">)</span>
    <span class="n">maker</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Char</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;Maker&#39;</span><span class="p">)</span>

    <span class="c1"># a Laptop has a screen</span>
    <span class="n">screen_id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Many2one</span><span class="p">(</span><span class="s1">&#39;delegation.screen&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ondelete</span><span class="o">=</span><span class="s2">&quot;cascade&quot;</span><span class="p">)</span>
    <span class="c1"># a Laptop has a keyboard</span>
    <span class="n">keyboard_id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Many2one</span><span class="p">(</span><span class="s1">&#39;delegation.keyboard&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ondelete</span><span class="o">=</span><span class="s2">&quot;cascade&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>        <span class="n">record</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;delegation.laptop&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span>
            <span class="s1">&#39;screen_id&#39;</span><span class="p">:</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;delegation.screen&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mf">13.0</span><span class="p">})</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s1">&#39;keyboard_id&#39;</span><span class="p">:</span> <span class="n">env</span><span class="p">[</span><span class="s1">&#39;delegation.keyboard&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;layout&#39;</span><span class="p">:</span> <span class="s1">&#39;QWERTY&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="p">})</span>
            <span class="n">record</span><span class="o">.</span><span class="n">size</span>
            <span class="n">record</span><span class="o">.</span><span class="n">layout</span>
</pre></div>
</div>
<p >приведет к:</p><div class="highlight-text"><div class="highlight"><pre><span></span>            13.0
            &#39;QWERTY&#39;
</pre></div>
</div>
<p >и можно написать прямо на делегированное поле:</p><div class="highlight-python"><div class="highlight"><pre><span></span>        <span class="n">record</span><span class="o">.</span><span class="n">write</span><span class="p">({</span><span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mf">14.0</span><span class="p">})</span>
</pre></div>
</div>
<div role="alert" class="alert alert-warning"><h3 class="alert-title">Предупреждение</h3><p >при использовании наследования делегирования методы * не * наследуются, только поля</p></div></section><section id="fields-incremental-definition"><h3 >Поля Инкрементальное Определение</h3><p >Поле определяется как атрибут класса в классе модели. Если модель расширена, можно также расширить определение поля, переопределив поле с тем же именем и тем же типом в подклассе. В этом случае атрибуты поля берутся из родительского класса и переопределяются атрибутами, указанными в подклассах.</p><p >Например, второй класс ниже добавляет только всплывающую подсказку к полю `` state``</p><div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">First</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Selection</span><span class="p">([</span><span class="o">...</span><span class="p">],</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Second</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_inherit</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Selection</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Blah blah blah&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section><section id="module-odoo.exceptions"><i id="error-management"></i><i id="reference-exceptions"></i><h2 >Управление ошибками</h2><p >Модуль Odoo Exceptions определяет несколько основных типов исключений.</p><p >Эти типы понимаются уровнем RPC. Любой другой тип исключения пузырится, пока уровень RPC не будет обработан как «Ошибка сервера».</p><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >Если вы подумываете о введении новых исключений, проверьте модуль: mod: <code >odoo.addons.test_exceptions</code>.</p></div><section class="code-exception"><h6 id="odoo.exceptions.AccessDenied"><code><em >exception </em>odoo.exceptions.AccessDenied(<em>message='Access denied'</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L61" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Ошибка логина / пароля.</p><div role="alert" class="alert alert-info"><h3 class="alert-title">Примечание</h3><p >Нет трассировки.</p></div><div role="alert" class="alert admonition-example"><h3 class="alert-title">пример</h3><p >При попытке войти с неверным паролем.</p></div></section><section class="code-exception"><h6 id="odoo.exceptions.AccessError"><code><em >exception </em>odoo.exceptions.AccessError(<em>msg</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L80" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Ошибка прав доступа.</p><div role="alert" class="alert admonition-example"><h3 class="alert-title">пример</h3><p >Когда вы пытаетесь прочитать запись, что вам не разрешено.</p></div></section><section class="code-exception"><h6 id="odoo.exceptions.CacheMiss"><code><em >exception </em>odoo.exceptions.CacheMiss(<em>record</em>, <em>field</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L92" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Отсутствует значение (я) в кэше.</p><div role="alert" class="alert admonition-example"><h3 class="alert-title">пример</h3><p >При попытке прочитать значение в очищенном кэше.</p></div></section><section class="code-exception"><h6 id="odoo.exceptions.MissingError"><code><em >exception </em>odoo.exceptions.MissingError(<em>msg</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L104" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Отсутствует запись (и).</p><div role="alert" class="alert admonition-example"><h3 class="alert-title">пример</h3><p >При попытке записи на удаленную запись.</p></div></section><section class="code-exception"><h6 id="odoo.exceptions.RedirectWarning"><code><em >exception </em>odoo.exceptions.RedirectWarning<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L47" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Предупреждение с возможностью перенаправления пользователя вместо простого отображения предупреждающего сообщения.</p><div class="code-fields"><div class="code-field"><div class="code-field-name">Параметры</div><div class="code-field-body"><ul ><li ><strong >action_id</strong> (<a href="https://docs.python.org/3/library/functions.html#int" title="(в Python v3.8)" class="external reference alert-link"><code >int</code></a>) – идентификатор действия, где выполнить перенаправление</li><li ><strong >button_text</strong> (<a href="https://docs.python.org/3/library/stdtypes.html#str" title="(в Python v3.8)" class="external reference alert-link"><code >str</code></a>) – текст, который нужно поместить на кнопку, которая вызовет перенаправление.</li></ul></div></div></div></section><section class="code-exception"><h6 id="odoo.exceptions.UserError"><code><em >exception </em>odoo.exceptions.UserError(<em>msg</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L33" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Общая ошибка, управляемая клиентом.</p><p >Обычно, когда пользователь пытается сделать что-то, что не имеет смысла, учитывая текущее состояние записи.</p></section><section class="code-exception"><h6 id="odoo.exceptions.ValidationError"><code><em >exception </em>odoo.exceptions.ValidationError(<em>msg</em>)<a href="https://github.com/odoo/odoo/blob/13.0/odoo/exceptions.py#L116" class="external reference alert-link"><span class="viewcode-link">[исходный код]</span></a></code></h6><p >Нарушение ограничений питона.</p><div role="alert" class="alert admonition-example"><h3 class="alert-title">пример</h3><p >При попытке создать нового пользователя с логином, который уже существует в БД.</p></div></section></section>

          </article>
        </div>
        
        <div id="mask"></div>
      </main>
  </div>

  <div class="floating_action_container">
    <a id="floating_action" class="ripple" href="#">
      <i class="mdi-action-explore"></i>
    </a>
    <div id="floating_action_menu">
      <span class="bubble"></span>
      <ul class="list-group content">
        <li class="list-group-item ripple"><a>Cras justo odio</a></li>
        <li class="list-group-item ripple"><a>Dapibus ac facilisis in</a></li>
        <li class="list-group-item ripple"><a>Morbi leo risus</a></li>
        <li class="list-group-item ripple"><a>Porta ac consectetur ac</a></li>
        <li class="list-group-item ripple"><a>Vestibulum at eros</a></li>
      </ul>
    </div>
  </div>
<!-- 
  <footer>
    <div id="footer" class="container">
      <span class="o_logo o_logo_inverse center-block o_footer_logo"></span>
      <div class="row">
        <div class="col-sm-7 col-md-7 col-lg-6">
          <div class="row">
            <div class="col-xs-6 col-sm-4">
              <span class="menu_title">Community</span>
              <ul>
                <li><a href="https://github.com/odoo/odoo">Github</a></li>
                <li><a href="http://www.odoo.com/page/download">Download</a></li>
                <li class="divider"></li>
                <li><a href="http://runbot.odoo.com/runbot/repo/git-github-com-odoo-enterprise-7">Runbot</a></li>
                <li><a href="https://github.com/odoo/odoo/wiki/Translations">Translations</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/page/odoo-community">Mailing Lists</a></li>
                <li><a href="http://www.odoo.com/forum/help-1">Forum</a></li>
              </ul>
            </div>
            <div class="col-xs-6 col-sm-4">
              <span class="menu_title">Services</span>
              <ul>
                <li><a href="https://www.odoo.sh">Odoo Cloud Platform</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/help">Support</a></li>
                <li><a href="https://upgrade.odoo.com">Upgrade</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/partners">Find a partner</a></li>
                <li><a href="http://www.odoo.com/page/become-a-partner">Become a partner</a></li>
                <li class="divider"></li>
                <li><a href="http://training.odoo.com/courses/odoo-functional">Training Center</a></li>
                <li><a href="http://www.odoo.com/page/education-program">Education</a></li>
                <li class="divider"></li>
                <li><a href="http://www.odoo.com/page/security">Security</a></li>
              </ul>
            </div>
            <div class="col-xs-12 col-sm-4 mb64">
              <span class="menu_title">About us</span>
              <ul>
                <li><a href="http://www.odoo.com/page/about-us">Our company</a></li>
                <li><a href="http://www.odoo.com/page/contactus">Contact</a></li>
                <li class="divider" />
                <li><a href="http://www.odoo.com/event">Events</a></li>
                <li><a href="http://www.odoo.com/blog">Blog</a></li>
                <li><a href="http://www.odoo.com/blog/6">Customers</a></li>
                <li class="divider" />
                <li><a href="http://www.odoo.com/jobs">Jobs</a></li>
                <li class="divider" />
                <li><a href="http://www.odoo.com/page/legal">Legal</a> | <a href="http://www.odoo.com/privacy">Privacy</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-sm-5 col-md-4 col-md-offset-1 col-lg-5 col-lg-offset-1">
          <p>
            <small>
              Odoo is a suite of open source business apps that cover all your company needs: CRM, eCommerce, accounting, inventory, point of sale, project management, etc.
              <br/><br/>
              Odoo's unique value proposition is to be at the same time very easy to use and fully integrated.
            </small>
          </p>
        </div>
      </div>
    </div>
    <div class="o_footer_bottom">
      <div class="container">
        <a class="small" href="http://www.odoo.com/page/website-builder">Website made with <span class="o_logo o_logo_inverse o_logo_15"></span></a>
        <div class="social-links pull-right">
          <a href="http://www.odoo.com/web/about/facebook"><i class="fa fa-facebook"></i></a>
          <a href="http://www.odoo.com/web/about/twitter"><i class="fa fa-twitter"></i></a>
          <a href="http://www.odoo.com/web/about/linkedin"><i class="fa fa-linkedin"></i></a>
          <a href="mailto:info@odoo.com"><i class="fa fa-envelope"></i></a>
        </div>
      </div>
    </div>
  </footer>
  -->
  </body>
</html>